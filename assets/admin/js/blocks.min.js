wp.blocks.registerBlockType("jb-block/jb-job-post",{title:wp.i18n.__("Post Job","jobboardwp"),description:wp.i18n.__("Displaying jobs posting form","jobboardwp"),icon:"forms",category:"jb-blocks",attributes:{content:{source:"html",selector:"p"}},edit:function(e){return void 0===e.attributes.content&&e.setAttributes({content:"[jb_post_job]"}),[wp.element.createElement("div",{className:"jb-post-job-wrapper"},wp.i18n.__("Post Job","jobboardwp"))]},save:function(e){return wp.element.createElement(wp.editor.RichText.Content,{tagName:"p",className:e.className,value:e.attributes.content})}}),wp.blocks.registerBlockType("jb-block/jb-job",{title:wp.i18n.__("Single job","jobboardwp"),description:wp.i18n.__("Displaying a single job","jobboardwp"),icon:"text",category:"jb-blocks",attributes:{content:{source:"html",selector:"p"},job_id:{type:"select"}},edit:wp.data.withSelect(function(e){return{posts:e("core").getEntityRecords("postType","jb-job",{per_page:-1,_fields:["id","title"]})}})(function(o){var e,t=o.posts,n=o.className,a=(o.attributes,o.setAttributes,o.attributes.job_id),l=o.attributes.content;function r(e){return void 0!==e&&""!==e?'[jb_job id="'+e+'"]':"[jb_job]"}if(e=[{id:"",title:""}].concat(t),!t)return wp.element.createElement("p",{className:n},wp.element.createElement(wp.components.Spinner,null),wp.i18n.__("Loading jobs","jobboardwp"));if(0===t.length)return wp.element.createElement("p",null,wp.i18n.__("No jobs","jobboardwp"));if(void 0===a){o.setAttributes({job_id:e[0].id});var i=r(e[0].id);o.setAttributes({content:i})}void 0===l&&o.setAttributes({content:"[jb_job]"});var s,b=(s=[],e.map(function(e){s.push({label:e.title.rendered,value:e.id})}),s);return[wp.element.createElement("div",{className:"jb-job-wrapper"},wp.i18n.__("Job","jobboardwp")),wp.element.createElement(wp.blockEditor.InspectorControls,{},wp.element.createElement(wp.components.PanelBody,{title:wp.i18n.__("Job","jobboardwp")},wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Job","jobboardwp"),className:"jb_select_job",value:a,options:b,style:{height:"35px",lineHeight:"20px",padding:"0 7px"},onChange:function(e){o.setAttributes({job_id:e});var t=r(e);o.setAttributes({content:t})}})))]}),save:function(e){return wp.element.createElement(wp.editor.RichText.Content,{tagName:"p",className:e.className,value:e.attributes.content})}}),wp.blocks.registerBlockType("jb-block/jb-jobs-dashboard",{title:wp.i18n.__("Jobs dashboard","jobboardwp"),description:wp.i18n.__("Displaying jobs dashboard","jobboardwp"),icon:"dashboard",category:"jb-blocks",attributes:{content:{source:"html",selector:"p"}},edit:function(e){return void 0===e.attributes.content&&e.setAttributes({content:"[jb_jobs_dashboard]"}),[wp.element.createElement("div",{className:"jb-job-dashboard-wrapper"},wp.i18n.__("Jobs dashboard","jobboardwp"))]},save:function(e){return wp.element.createElement(wp.editor.RichText.Content,{tagName:"p",className:e.className,value:e.attributes.content})}}),wp.blocks.registerBlockType("jb-block/jb-jobs-categories-list",{title:wp.i18n.__("Jobs categories list","jobboardwp"),description:wp.i18n.__("Displaying jobs categories list","jobboardwp"),icon:"editor-ul",category:"jb-blocks",attributes:{content:{source:"html",selector:"p"}},edit:function(e){return void 0===e.attributes.content&&e.setAttributes({content:"[jb_job_categories_list]"}),[wp.element.createElement("div",{className:"jb-job-categories-list-wrapper"},wp.i18n.__("Jobs categories list","jobboardwp"))]},save:function(e){return wp.element.createElement(wp.editor.RichText.Content,{tagName:"p",className:e.className,value:e.attributes.content})}}),wp.blocks.registerBlockType("jb-block/jb-jobs-list",{title:wp.i18n.__("Jobs list","jobboardwp"),description:wp.i18n.__("Displaying jobs list","jobboardwp"),icon:"editor-ul",category:"jb-blocks",attributes:{user_id:{type:"select"},per_page:{type:"string"},no_logo:{type:"boolean",default:!1},hide_filled:{type:"boolean",default:!1},hide_expired:{type:"boolean",default:!1},hide_search:{type:"boolean",default:!1},hide_location_search:{type:"boolean",default:!1},hide_filters:{type:"boolean",default:!1},hide_job_types:{type:"boolean",default:!1},no_jobs_text:{type:"string"},no_job_search_text:{type:"string"},load_more_text:{type:"string"},category:{type:"select"},type:{type:"select"},orderby:{type:"select",default:"date"},order:{type:"select",default:"DESC"},filled_only:{type:"boolean",default:!1},content:{source:"html",selector:"p"}},edit:wp.data.withSelect(function(e){return{users:e("core").getEntityRecords("root","user",{per_page:-1,_fields:["id","name"]}),types:e("core").getEntityRecords("taxonomy","jb-job-type",{_fields:["id","name"]}),categories:e("core").getEntityRecords("taxonomy","jb-job-category",{_fields:["id","name"]})}})(function(h){var e=h.users,t=h.attributes.user_id,o=[{id:"",name:""}],n=h.className,a=h.attributes.per_page,l=h.attributes.no_logo,r=h.attributes.hide_filled,i=h.attributes.hide_expired,s=h.attributes.hide_search,b=h.attributes.hide_location_search,p=h.attributes.hide_filters,c=h.attributes.hide_job_types,d=h.attributes.no_jobs_text,_=h.attributes.no_job_search_text,u=h.attributes.load_more_text,m=h.attributes.orderby,w=h.attributes.order,j=[{label:wp.i18n.__("Date","jobboardwp"),value:"date"},{label:wp.i18n.__("Title","jobboardwp"),value:"title"}],g=[{label:wp.i18n.__("Ascending","jobboardwp"),value:"ASC"},{label:wp.i18n.__("Descending","jobboardwp"),value:"DESC"}],y=h.types,f=h.attributes.type,v=[{id:"",name:""}],x=h.categories,N=h.attributes.category,C=[{id:"",name:""}],E=h.attributes.filled_only,k=h.attributes.content;function A(e,t){var o=[];return"user"===t?e.map(function(e){o.push({label:e.name,value:e.id})}):"type"===t?e.map(function(e){o.push({label:e.name,value:e.id})}):"category"===t&&e.map(function(e){o.push({label:e.name,value:e.id})}),o}function T(e,t,o,n,a,l,r,i,s,b,p,c,d,_,u,m,w){var j="[jb_jobs";void 0!==e&&""!==e&&(j=j+' employer-id="'+e+'"'),void 0!==t&&""!==t&&(j=j+' per-page="'+t+'"'),j+=!1!==o?' no-logo="1"':' no-logo="0"',j+=!1!==n?' hide-filled="1"':' hide-filled="0"',j+=!1!==a?' hide-expired="1"':' hide-expired="0"',j+=!1!==l?' hide-search="1"':' hide-search="0"',j+=!1!==r?' hide-locatio-search="1"':' hide-location-search="0"',j+=!1!==i?' hide-filters="1"':' hide-filters="0"',j+=!1!==s?' hide-job-types="1"':' hide-job-types="0"',void 0!==b&&""!==b&&(j=j+' no-jobs-text="'+b+'"'),void 0!==p&&""!==p&&(j=j+' no-job-search-text="'+p+'"'),void 0!==c&&""!==c&&(j=j+' load-more-text="'+c+'"'),void 0!==_&&""!==_&&(j=j+' type="'+_+'"'),void 0!==d&&""!==d&&(j=j+' category="'+d+'"'),void 0!==u&&(j=j+' orderby="'+u+'"'),void 0!==m&&(j=j+' order="'+m+'"'),j+=!1!==w?' filled-only="1"':' filled-only="0"',j+="]",h.setAttributes({content:j})}if(null!==e&&(o=o.concat(e)),null!==y&&(v=v.concat(y)),null!==x&&(C=C.concat(x)),!o||!v||!C)return wp.element.createElement("p",{className:n},wp.element.createElement(wp.components.Spinner,null),wp.i18n.__("Loading data","jobboardwp"));if(0===o.length||0===v.length||0===C.length)return wp.element.createElement("p",null,wp.i18n.__("No data","jobboardwp"));void 0===k&&h.setAttributes({content:"[jb_jobs]"});var S=A(C,"category"),J=A(o,"user"),D=A(v,"type");return[wp.element.createElement("div",{className:"jb-jobs-list-wrapper"},wp.i18n.__("Jobs list","jobboardwp")),wp.element.createElement(wp.blockEditor.InspectorControls,{},wp.element.createElement(wp.components.PanelBody,{title:wp.i18n.__("Jobs list","jobboardwp")},wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select employer","jobboardwp"),className:"jb_select_employer",value:h.attributes.user_id,options:J,onChange:function(e){h.setAttributes({user_id:e}),T(e,a,l,r,i,s,b,p,c,d,_,u,N,f,m,w,E)}}),wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("Per page","jobboardwp"),className:"jb_per_page",type:"number",value:h.attributes.per_page,onChange:function(e){h.setAttributes({per_page:e}),T(t,e,l,r,i,s,b,p,c,d,_,u,N,f,m,w,E)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("No logo?","jobboardwp"),className:"jb_no_logo",checked:h.attributes.no_logo,onChange:function(e){h.setAttributes({no_logo:e}),T(t,a,e,r,i,s,b,p,c,d,_,u,N,f,m,w,E)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide filled?","jobboardwp"),className:"jb_hide_filled",checked:h.attributes.hide_filled,onChange:function(e){h.setAttributes({hide_filled:e}),T(t,a,l,e,i,s,b,p,c,d,_,u,N,f,m,w,E)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide expired?","jobboardwp"),className:"jb_hide_expired",checked:h.attributes.hide_expired,onChange:function(e){h.setAttributes({hide_expired:e}),T(t,a,l,r,e,s,b,p,c,d,_,u,N,f,m,w,E)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide search?","jobboardwp"),className:"jb_hide_search",checked:h.attributes.hide_search,onChange:function(e){h.setAttributes({hide_search:e}),T(t,a,l,r,i,e,b,p,c,d,_,u,N,f,m,w,E)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide location search?","jobboardwp"),className:"jb_hide_location_search",checked:h.attributes.hide_location_search,onChange:function(e){h.setAttributes({hide_location_search:e}),T(t,a,l,r,i,s,e,p,c,d,_,u,N,f,m,w,E)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide filters?","jobboardwp"),className:"jb_hide_filters",checked:h.attributes.hide_filters,onChange:function(e){h.setAttributes({hide_filters:e}),T(t,a,l,r,i,s,b,e,c,d,_,u,N,f,m,w,E)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide job types?","jobboardwp"),className:"jb_hide_job_types",checked:h.attributes.hide_job_types,onChange:function(e){h.setAttributes({hide_job_types:e}),T(t,a,l,r,i,s,b,p,e,d,_,u,N,f,m,w,E)}}),wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("No jobs text","jobboardwp"),className:"jb_no_jobs_text",type:"text",value:h.attributes.no_jobs_text,onChange:function(e){h.setAttributes({no_jobs_text:e}),T(t,a,l,r,i,s,b,p,c,e,_,u,N,f,m,w,E)}}),wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("No job search text","jobboardwp"),className:"jb_no_job_search_text",type:"text",value:h.attributes.no_job_search_text,onChange:function(e){h.setAttributes({no_job_search_text:e}),T(t,a,l,r,i,s,b,p,c,d,e,u,N,f,m,w,E)}}),wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("Loadmore text","jobboardwp"),className:"jb_load_more_text",type:"text",value:h.attributes.load_more_text,onChange:function(e){h.setAttributes({load_more_text:e}),T(t,a,l,r,i,s,b,p,c,d,_,e,N,f,m,w,E)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select category","jobboardwp"),className:"jb_select_category",value:h.attributes.category,options:S,onChange:function(e){h.setAttributes({category:e}),T(t,a,l,r,i,s,b,p,c,d,_,u,e,f,m,w,E)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select type","jobboardwp"),className:"jb_select_type",value:h.attributes.type,options:D,onChange:function(e){h.setAttributes({type:e}),T(t,a,l,r,i,s,b,p,c,d,_,u,N,e,m,w,E)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select order by","jobboardwp"),className:"jb_select_orderby",value:h.attributes.orderby,options:j,onChange:function(e){h.setAttributes({orderby:e}),T(t,a,l,r,i,s,b,p,c,d,_,u,N,f,e,w,E)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select order","jobboardwp"),className:"jb_select_order",value:h.attributes.order,options:g,onChange:function(e){h.setAttributes({order:e}),T(t,a,l,r,i,s,b,p,c,d,_,u,N,f,m,e,E)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Filled only?","jobboardwp"),className:"jb_filled_only",checked:h.attributes.filled_only,onChange:function(e){h.setAttributes({filled_only:e}),T(t,a,l,r,i,s,b,p,c,d,_,u,N,f,m,w,e)}})))]}),save:function(e){return wp.element.createElement(wp.editor.RichText.Content,{tagName:"p",className:e.className,value:e.attributes.content})}});