wp.blocks.registerBlockType("jb-block/jb-job-post",{title:wp.i18n.__("Post Job","jobboardwp"),description:wp.i18n.__("Displaying jobs posting form","jobboardwp"),icon:"forms",category:"jb-blocks",attributes:{content:{source:"html",selector:"p"}},edit:function(e){return void 0===e.attributes.content&&e.setAttributes({content:"[jb_post_job]"}),[wp.element.createElement("div",{className:"jb-post-job-wrapper"},wp.i18n.__("Post Job","jobboardwp"))]},save:function(e){return wp.element.createElement(wp.editor.RichText.Content,{tagName:"p",className:e.className,value:e.attributes.content})}}),wp.blocks.registerBlockType("jb-block/jb-job",{title:wp.i18n.__("Single job","jobboardwp"),description:wp.i18n.__("Displaying a single job","jobboardwp"),icon:"text",category:"jb-blocks",attributes:{content:{source:"html",selector:"p"},job_id:{type:"select"}},edit:wp.data.withSelect(function(e){return{posts:e("core").getEntityRecords("postType","jb-job",{per_page:-1,_fields:["id","title"]})}})(function(o){var e,t=o.posts,n=o.className,l=(o.attributes,o.setAttributes,o.attributes.job_id),a=o.attributes.content;function r(e){return void 0!==e&&""!==e?'[jb_job id="'+e+'"]':"[jb_job]"}if(e=[{id:"",title:""}].concat(t),!t)return wp.element.createElement("p",{className:n},wp.element.createElement(wp.components.Spinner,null),wp.i18n.__("Loading jobs","jobboardwp"));if(0===t.length)return wp.element.createElement("p",null,wp.i18n.__("No jobs","jobboardwp"));if(void 0===l){o.setAttributes({job_id:e[0].id});var i=r(e[0].id);o.setAttributes({content:i})}void 0===a&&o.setAttributes({content:"[jb_job]"});var s,b=(s=[],e.map(function(e){s.push({label:e.title.rendered,value:e.id})}),s);return[wp.element.createElement("div",{className:"jb-job-wrapper"},wp.i18n.__("Job","jobboardwp")),wp.element.createElement(wp.blockEditor.InspectorControls,{},wp.element.createElement(wp.components.PanelBody,{title:wp.i18n.__("Job","jobboardwp")},wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Job","jobboardwp"),className:"jb_select_job",value:l,options:b,style:{height:"35px",lineHeight:"20px",padding:"0 7px"},onChange:function(e){o.setAttributes({job_id:e});var t=r(e);o.setAttributes({content:t})}})))]}),save:function(e){return wp.element.createElement(wp.editor.RichText.Content,{tagName:"p",className:e.className,value:e.attributes.content})}}),wp.blocks.registerBlockType("jb-block/jb-jobs-dashboard",{title:wp.i18n.__("Jobs dashboard","jobboardwp"),description:wp.i18n.__("Displaying jobs dashboard","jobboardwp"),icon:"dashboard",category:"jb-blocks",attributes:{content:{source:"html",selector:"p"}},edit:function(e){return void 0===e.attributes.content&&e.setAttributes({content:"[jb_jobs_dashboard]"}),[wp.element.createElement("div",{className:"jb-job-dashboard-wrapper"},wp.i18n.__("Jobs dashboard","jobboardwp"))]},save:function(e){return wp.element.createElement(wp.editor.RichText.Content,{tagName:"p",className:e.className,value:e.attributes.content})}}),wp.blocks.registerBlockType("jb-block/jb-jobs-categories-list",{title:wp.i18n.__("Jobs categories list","jobboardwp"),description:wp.i18n.__("Displaying jobs categories list","jobboardwp"),icon:"editor-ul",category:"jb-blocks",attributes:{content:{source:"html",selector:"p"}},edit:function(e){return void 0===e.attributes.content&&e.setAttributes({content:"[jb_job_categories_list]"}),[wp.element.createElement("div",{className:"jb-job-categories-list-wrapper"},wp.i18n.__("Jobs categories list","jobboardwp"))]},save:function(e){return wp.element.createElement(wp.editor.RichText.Content,{tagName:"p",className:e.className,value:e.attributes.content})}}),wp.blocks.registerBlockType("jb-block/jb-jobs-list",{title:wp.i18n.__("Jobs list","jobboardwp"),description:wp.i18n.__("Displaying jobs list","jobboardwp"),icon:"editor-ul",category:"jb-blocks",attributes:{user_id:{type:"select"},per_page:{type:"string"},no_logo:{type:"boolean",default:jb_blocks_options["jobs-list-no-logo"]},hide_filled:{type:"boolean",default:jb_blocks_options["jobs-list-hide-filled"]},hide_expired:{type:"boolean",default:jb_blocks_options["jobs-list-hide-expired"]},hide_search:{type:"boolean",default:jb_blocks_options["jobs-list-hide-search"]},hide_location_search:{type:"boolean",default:jb_blocks_options["jobs-list-hide-location-search"]},hide_filters:{type:"boolean",default:jb_blocks_options["jobs-list-hide-filters"]},hide_job_types:{type:"boolean",default:jb_blocks_options["jobs-list-hide-job-types"]},no_jobs_text:{type:"string"},no_job_search_text:{type:"string"},load_more_text:{type:"string"},category:{type:"select"},type:{type:"select"},orderby:{type:"select",default:"date"},order:{type:"select",default:"DESC"},filled_only:{type:"boolean",default:!1},content:{source:"html",selector:"p"}},edit:wp.data.withSelect(function(e){return{users:e("core").getEntityRecords("root","user",{per_page:-1,_fields:["id","name"]}),types:e("core").getEntityRecords("taxonomy","jb-job-type",{_fields:["id","name"]}),categories:e("core").getEntityRecords("taxonomy","jb-job-category",{_fields:["id","name"]})}})(function(h){var e=h.users,t=h.attributes.user_id,o=[{id:"",name:""}],n=h.className,l=h.attributes.per_page,a=h.attributes.no_logo,r=h.attributes.hide_filled,i=h.attributes.hide_expired,s=h.attributes.hide_search,b=h.attributes.hide_location_search,p=h.attributes.hide_filters,c=h.attributes.hide_job_types,d=h.attributes.no_jobs_text,_=h.attributes.no_job_search_text,u=h.attributes.load_more_text,m=h.attributes.orderby,w=h.attributes.order,j=[{label:wp.i18n.__("Date","jobboardwp"),value:"date"},{label:wp.i18n.__("Title","jobboardwp"),value:"title"}],g=[{label:wp.i18n.__("Ascending","jobboardwp"),value:"ASC"},{label:wp.i18n.__("Descending","jobboardwp"),value:"DESC"}],y=h.types,f=h.attributes.type,v=[{id:"",name:""}],E=h.categories,C=h.attributes.category,N=[{id:"",name:""}],x=h.attributes.filled_only,k=h.attributes.content,A="-hide";function T(e,t){var o=[];return"user"===t?e.map(function(e){o.push({label:e.name,value:e.id})}):"type"===t?e.map(function(e){o.push({label:e.name,value:e.id})}):"category"===t&&e.map(function(e){o.push({label:e.name,value:e.id})}),o}function S(e,t,o,n,l,a,r,i,s,b,p,c,d,_,u,m,w){var j="[jb_jobs";void 0!==e&&""!==e&&(j=j+' employer-id="'+e+'"'),void 0!==t&&""!==t&&(j=j+' per-page="'+t+'"'),j+=!1!==o?' no-logo="1"':' no-logo="0"',j+=!1!==n?' hide-filled="1"':' hide-filled="0"',j+=!1!==l?' hide-expired="1"':' hide-expired="0"',j+=!1!==a?' hide-search="1"':' hide-search="0"',j+=!1!==r?' hide-locatio-search="1"':' hide-location-search="0"',j+=!1!==i?' hide-filters="1"':' hide-filters="0"',j+=!1!==s?' hide-job-types="1"':' hide-job-types="0"',void 0!==b&&""!==b&&(j=j+' no-jobs-text="'+b+'"'),void 0!==p&&""!==p&&(j=j+' no-job-search-text="'+p+'"'),void 0!==c&&""!==c&&(j=j+' load-more-text="'+c+'"'),void 0!==_&&""!==_&&(j=j+' type="'+_+'"'),void 0!==d&&""!==d&&(j=j+' category="'+d+'"'),void 0!==u&&(j=j+' orderby="'+u+'"'),void 0!==m&&(j=j+' order="'+m+'"'),j+=!1!==w?' filled-only="1"':' filled-only="0"',j+="]",h.setAttributes({content:j})}if(null!==e&&(o=o.concat(e)),null!==y&&(v=v.concat(y),0!==y.length&&(A="")),null!==E&&(N=N.concat(E),0!==E.length&&(A="")),!o||!v||!N)return wp.element.createElement("p",{className:n},wp.element.createElement(wp.components.Spinner,null),wp.i18n.__("Loading data","jobboardwp"));if(0===o.length||0===v.length||0===N.length)return wp.element.createElement("p",null,wp.i18n.__("No data","jobboardwp"));void 0===k&&h.setAttributes({content:"[jb_jobs]"});var R=T(N,"category"),J=T(o,"user"),H=T(v,"type");return[wp.element.createElement("div",{className:"jb-jobs-list-wrapper"},wp.i18n.__("Jobs list","jobboardwp")),wp.element.createElement(wp.blockEditor.InspectorControls,{},wp.element.createElement(wp.components.PanelBody,{title:wp.i18n.__("Jobs list","jobboardwp")},wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select employer","jobboardwp"),className:"jb_select_employer",value:h.attributes.user_id,options:J,onChange:function(e){h.setAttributes({user_id:e}),S(e,l,a,r,i,s,b,p,c,d,_,u,C,f,m,w,x)}}),wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("Per page","jobboardwp"),className:"jb_per_page",type:"number",value:h.attributes.per_page,onChange:function(e){h.setAttributes({per_page:e}),S(t,e,a,r,i,s,b,p,c,d,_,u,C,f,m,w,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide logo","jobboardwp"),className:"jb_no_logo",checked:h.attributes.no_logo,onChange:function(e){h.setAttributes({no_logo:e}),S(t,l,e,r,i,s,b,p,c,d,_,u,C,f,m,w,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide filled","jobboardwp"),className:"jb_hide_filled",checked:h.attributes.hide_filled,onChange:function(e){h.setAttributes({hide_filled:e}),S(t,l,a,e,i,s,b,p,c,d,_,u,C,f,m,w,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide expired","jobboardwp"),className:"jb_hide_expired",checked:h.attributes.hide_expired,onChange:function(e){h.setAttributes({hide_expired:e}),S(t,l,a,r,e,s,b,p,c,d,_,u,C,f,m,w,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide search","jobboardwp"),className:"jb_hide_search",checked:h.attributes.hide_search,onChange:function(e){h.setAttributes({hide_search:e}),S(t,l,a,r,i,e,b,p,c,d,_,u,C,f,m,w,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide location search","jobboardwp"),className:"jb_hide_location_search",checked:h.attributes.hide_location_search,onChange:function(e){h.setAttributes({hide_location_search:e}),S(t,l,a,r,i,s,e,p,c,d,_,u,C,f,m,w,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide filters","jobboardwp"),className:"jb_hide_filters",checked:h.attributes.hide_filters,onChange:function(e){h.setAttributes({hide_filters:e}),S(t,l,a,r,i,s,b,e,c,d,_,u,C,f,m,w,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide job types","jobboardwp"),className:"jb_hide_job_types",checked:h.attributes.hide_job_types,onChange:function(e){h.setAttributes({hide_job_types:e}),S(t,l,a,r,i,s,b,p,e,d,_,u,C,f,m,w,x)}}),wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("No jobs text","jobboardwp"),className:"jb_no_jobs_text",type:"text",value:h.attributes.no_jobs_text,onChange:function(e){h.setAttributes({no_jobs_text:e}),S(t,l,a,r,i,s,b,p,c,e,_,u,C,f,m,w,x)}}),wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("No job search text","jobboardwp"),className:"jb_no_job_search_text",type:"text",value:h.attributes.no_job_search_text,onChange:function(e){h.setAttributes({no_job_search_text:e}),S(t,l,a,r,i,s,b,p,c,d,e,u,C,f,m,w,x)}}),wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("Load more text","jobboardwp"),className:"jb_load_more_text",type:"text",value:h.attributes.load_more_text,onChange:function(e){h.setAttributes({load_more_text:e}),S(t,l,a,r,i,s,b,p,c,d,_,e,C,f,m,w,x)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select category","jobboardwp"),className:"jb_select_category-hide",value:h.attributes.category,options:R,onChange:function(e){h.setAttributes({category:e}),S(t,l,a,r,i,s,b,p,c,d,_,u,e,f,m,w,x)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select type","jobboardwp"),className:"jb_select_type"+A,value:h.attributes.type,options:H,onChange:function(e){h.setAttributes({type:e}),S(t,l,a,r,i,s,b,p,c,d,_,u,C,e,m,w,x)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select order by","jobboardwp"),className:"jb_select_orderby",value:h.attributes.orderby,options:j,onChange:function(e){h.setAttributes({orderby:e}),S(t,l,a,r,i,s,b,p,c,d,_,u,C,f,e,w,x)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select order","jobboardwp"),className:"jb_select_order",value:h.attributes.order,options:g,onChange:function(e){h.setAttributes({order:e}),S(t,l,a,r,i,s,b,p,c,d,_,u,C,f,m,e,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Filled only","jobboardwp"),className:"jb_filled_only",checked:h.attributes.filled_only,onChange:function(e){h.setAttributes({filled_only:e}),S(t,l,a,r,i,s,b,p,c,d,_,u,C,f,m,w,e)}})))]}),save:function(e){return wp.element.createElement(wp.editor.RichText.Content,{tagName:"p",className:e.className,value:e.attributes.content})}}),wp.blocks.registerBlockType("jb-block/jb-recent-jobs",{title:wp.i18n.__("Recent Jobs","jobboardwp"),description:wp.i18n.__("Displaying recent jobs","jobboardwp"),icon:"editor-ul",category:"jb-blocks",attributes:{number:{type:"string",default:5},no_logo:{type:"boolean",default:jb_blocks_options["jobs-list-no-logo"]},hide_filled:{type:"boolean",default:jb_blocks_options["jobs-list-hide-filled"]},no_job_types:{type:"boolean",default:jb_blocks_options["jobs-list-hide-job-types"]},category:{type:"select"},type:{type:"select"},orderby:{type:"select",default:"date"},remote_only:{type:"boolean",default:!1},content:{source:"html",selector:"p"}},edit:wp.data.withSelect(function(e){return{types:e("core").getEntityRecords("taxonomy","jb-job-type",{_fields:["id","name"]}),categories:e("core").getEntityRecords("taxonomy","jb-job-category",{_fields:["id","name"]})}})(function(b){var e=b.className,t=b.attributes.number,o=b.attributes.no_logo,n=b.attributes.no_job_types,l=b.attributes.hide_filled,a=b.attributes.orderby,r=[{label:wp.i18n.__("Posting date","jobboardwp"),value:"date"},{label:wp.i18n.__("Expiry date","jobboardwp"),value:"expiry_date"}],i=b.types,s=b.attributes.type,p=[{id:"",name:""}],c=b.categories,d=b.attributes.category,_=[{id:"",name:""}],u=b.attributes.remote_only,m=b.attributes.content,w="-hide",j="-hide";function h(e,t){var o=[];return"type"===t?e.map(function(e){o.push({label:e.name,value:e.id})}):"category"===t&&e.map(function(e){o.push({label:e.name,value:e.id})}),o}function g(e,t,o,n,l,a,r,i){var s="[jb_recent_jobs";void 0!==e&&""!==e?s=s+' number="'+e+'"':s+=' number="5"',s+=!1!==r?' no_logo="1"':' no_logo="0"',s+=!1!==a?' hide_filled="1"':' hide_filled="0"',s+=!1!==i?' no_job_types="1"':' no_job_types="0"',void 0!==o&&""!==o&&(s=s+' type="'+o+'"'),void 0!==t&&""!==t&&(s=s+' category="'+t+'"'),void 0!==l&&(s=s+' orderby="'+l+'"'),s+=!1!==n?' remote_only="1"':' remote_only="0"',s+="]",b.setAttributes({content:s})}if(null!==i&&(p=p.concat(i),0!==i.length&&(j="")),null!==c&&(_=_.concat(c),0!==c.length&&(w="")),!p||!_)return wp.element.createElement("p",{className:e},wp.element.createElement(wp.components.Spinner,null),wp.i18n.__("Loading data","jobboardwp"));if(0===p.length||0===_.length)return wp.element.createElement("p",null,wp.i18n.__("No data","jobboardwp"));void 0===m&&b.setAttributes({content:"[jb_recent_jobs]"});var y=h(_,"category"),f=h(p,"type");return[wp.element.createElement("div",{className:"jb-recent-jobs-wrapper"},wp.i18n.__("Recent jobs","jobboardwp")),wp.element.createElement(wp.blockEditor.InspectorControls,{},wp.element.createElement(wp.components.PanelBody,{title:wp.i18n.__("Recent jobs","jobboardwp")},wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("Number","jobboardwp"),className:"jb_number",type:"number",value:b.attributes.number,onChange:function(e){b.setAttributes({number:e}),g(e,d,s,u,a,l,o,n)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide logo","jobboardwp"),className:"jb_no_logo",checked:b.attributes.no_logo,onChange:function(e){b.setAttributes({no_logo:e}),g(t,d,s,u,a,l,e,n)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide filled","jobboardwp"),className:"jb_hide_filled",checked:b.attributes.hide_filled,onChange:function(e){b.setAttributes({hide_filled:e}),g(t,d,s,u,a,e,o,n)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide job types","jobboardwp"),className:"jb_no_job_types",checked:b.attributes.no_job_types,onChange:function(e){b.setAttributes({no_job_types:e}),g(t,d,s,u,a,l,o,e)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select category","jobboardwp"),className:"jb_select_category"+w,value:b.attributes.category,options:y,onChange:function(e){b.setAttributes({category:e}),g(t,e,s,u,a,l,o,n)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select type","jobboardwp"),className:"jb_select_type"+j,value:b.attributes.type,options:f,onChange:function(e){b.setAttributes({type:e}),g(t,d,e,u,a,l,o,n)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select order by","jobboardwp"),className:"jb_select_orderby",value:b.attributes.orderby,options:r,onChange:function(e){b.setAttributes({orderby:e}),g(t,d,s,u,e,l,o,n)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Remote only","jobboardwp"),className:"jb_remote_only",checked:b.attributes.remote_only,onChange:function(e){b.setAttributes({remote_only:e}),g(t,d,s,e,a,l,o,n)}})))]}),save:function(e){return wp.element.createElement(wp.editor.RichText.Content,{tagName:"p",className:e.className,value:e.attributes.content})}});