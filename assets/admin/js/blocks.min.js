var default_hide_filled,default_hide_logo,default_hide_job_types,default_hide_expired,default_hide_search,default_hide_search_location,default_hide_filters;default_hide_filled=jb_blocks_options["jobs-list-hide-filled"]?1:0,default_hide_logo=jb_blocks_options["jobs-list-no-logo"]?1:0,default_hide_job_types=jb_blocks_options["jobs-list-hide-job-types"]?1:0,default_hide_expired=default_hide_expired=jb_blocks_options["jobs-list-hide-expired"]?1:0,default_hide_search=jb_blocks_options["jobs-list-hide-search"]?1:0,default_hide_search_location=jb_blocks_options["jobs-list-hide-location-search"]?1:0,default_hide_filters=jb_blocks_options["jobs-list-hide-filters"]?1:0,jQuery(window).load(function(e){new MutationObserver(function(e){e.forEach(function(e){jQuery(e.addedNodes).find(".jb-job-categories").each(function(){wp.JB.job_categories_list.objects.wrapper=jQuery(".jb-job-categories"),wp.JB.job_categories_list.objects.wrapper.length&&wp.JB.job_categories_list.ajax()}),jQuery(e.addedNodes).find(".jb-job-dashboard").each(function(){wp.JB.jobs_dashboard.objects.wrapper=jQuery(".jb-job-dashboard"),wp.JB.jobs_dashboard.objects.wrapper.length&&wp.JB.jobs_dashboard.ajax()}),jQuery(e.addedNodes).find(".jb-jobs").each(function(){wp.JB.jobs_list.objects.wrapper=jQuery(".jb-jobs"),wp.JB.jobs_list.objects.wrapper.length&&wp.JB.jobs_list.ajax()}),jQuery(e.addedNodes).find(".jb").each(function(){jb_responsive()})})}).observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0})}),wp.blocks.registerBlockType("jb-block/jb-job-post",{title:wp.i18n.__("Post Job","jobboardwp"),description:wp.i18n.__("Displaying jobs posting form","jobboardwp"),icon:"forms",category:"jb-blocks",edit:function(e){return jQuery("#jb-job-preview, #jb-job-draft, #jb_company_logo_plupload").attr("disabled","disabled"),wp.element.createElement("div",{},[wp.element.createElement(wp.components.ServerSideRender,{block:"jb-block/jb-job-post"})])},save:function(e){return null}}),wp.blocks.registerBlockType("jb-block/jb-job",{title:wp.i18n.__("Single job","jobboardwp"),description:wp.i18n.__("Displaying a single job","jobboardwp"),icon:"text",category:"jb-blocks",attributes:{job_id:{type:"select"}},edit:wp.data.withSelect(function(e){return{posts:e("core").getEntityRecords("postType","jb-job",{per_page:-1,_fields:["id","title"]})}})(function(o){var e,t=o.posts,n=o.className,l=o.attributes.job_id;function a(e){return void 0!==e&&""!==e?'[jb_job id="'+e+'"]':"[jb_job]"}if(e=[{id:"",title:""}].concat(t),!t)return wp.element.createElement("p",{className:n},wp.element.createElement(wp.components.Spinner,null),wp.i18n.__("","jobboardwp"));if(0===t.length)return wp.element.createElement("p",null,wp.i18n.__("No jobs","jobboardwp"));if(void 0===l){o.setAttributes({job_id:e[0].id});var r=a(e[0].id);o.setAttributes({content:r})}var i,s=(i=[],e.map(function(e){i.push({label:e.title.rendered,value:e.id})}),i);return jQuery(".jb-button.jb-job-apply").attr("disabled","disabled"),wp.element.createElement("div",{},[wp.element.createElement(wp.components.ServerSideRender,{block:"jb-block/jb-job",attributes:o.attributes}),wp.element.createElement(wp.blockEditor.InspectorControls,{},wp.element.createElement(wp.components.PanelBody,{title:wp.i18n.__("Job","jobboardwp")},wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Job","jobboardwp"),className:"jb_select_job",value:l,options:s,style:{height:"35px",lineHeight:"20px",padding:"0 7px"},onChange:function(e){o.setAttributes({job_id:e});var t=a(e);o.setAttributes({content:t})}})))])}),save:function(e){return null}}),wp.blocks.registerBlockType("jb-block/jb-jobs-dashboard",{title:wp.i18n.__("Jobs dashboard","jobboardwp"),description:wp.i18n.__("Displaying jobs dashboard","jobboardwp"),icon:"dashboard",category:"jb-blocks",attributes:{content:{source:"html",selector:"p"}},edit:function(e){return void 0===e.attributes.content&&e.setAttributes({content:"[jb_jobs_dashboard]"}),wp.element.createElement("div",{},[wp.element.createElement(wp.components.ServerSideRender,{block:"jb-block/jb-jobs-dashboard"})])},save:function(e){return null}}),wp.blocks.registerBlockType("jb-block/jb-jobs-categories-list",{title:wp.i18n.__("Jobs categories list","jobboardwp"),description:wp.i18n.__("Displaying jobs categories list","jobboardwp"),icon:"editor-ul",category:"jb-blocks",attributes:{content:{source:"html",selector:"p"}},edit:function(e){return void 0===e.attributes.content&&e.setAttributes({content:"[jb_job_categories_list]"}),wp.element.createElement("div",{},[wp.element.createElement(wp.components.ServerSideRender,{block:"jb-block/jb-jobs-categories-list"})])},save:function(e){return null}}),wp.blocks.registerBlockType("jb-block/jb-jobs-list",{title:wp.i18n.__("Jobs list","jobboardwp"),description:wp.i18n.__("Displaying jobs list","jobboardwp"),icon:"editor-ul",category:"jb-blocks",attributes:{user_id:{type:"select"},per_page:{type:"string"},no_logo:{type:"boolean",default:default_hide_logo},hide_filled:{type:"boolean",default:default_hide_filled},hide_expired:{type:"boolean",default:default_hide_expired},hide_search:{type:"boolean",default:default_hide_search},hide_location_search:{type:"boolean",default:default_hide_search_location},hide_filters:{type:"boolean",default:default_hide_filters},hide_job_types:{type:"boolean",default:default_hide_job_types},no_jobs_text:{type:"string"},no_job_search_text:{type:"string"},load_more_text:{type:"string"},category:{type:"select"},type:{type:"select"},orderby:{type:"select",default:"date"},order:{type:"select",default:"DESC"},filled_only:{type:"boolean",default:!1},content:{source:"html",selector:"p"}},edit:wp.data.withSelect(function(e){return{users:e("core").getEntityRecords("root","user",{per_page:-1,_fields:["id","name"]}),types:e("core").getEntityRecords("taxonomy","jb-job-type",{per_page:-1,_fields:["id","name"]}),categories:e("core").getEntityRecords("taxonomy","jb-job-category",{per_page:-1,_fields:["id","name"]})}})(function(h){var e=h.users,t=h.attributes.user_id,o=[{id:"",name:""}],n=h.className,l=h.attributes.per_page,a=h.attributes.no_logo,r=h.attributes.hide_filled,i=h.attributes.hide_expired,s=h.attributes.hide_search,b=h.attributes.hide_location_search,p=h.attributes.hide_filters,c=h.attributes.hide_job_types,d=h.attributes.no_jobs_text,_=h.attributes.no_job_search_text,u=h.attributes.load_more_text,j=h.attributes.orderby,m=h.attributes.order,w=[{label:wp.i18n.__("Date","jobboardwp"),value:"date"},{label:wp.i18n.__("Title","jobboardwp"),value:"title"}],y=[{label:wp.i18n.__("Ascending","jobboardwp"),value:"ASC"},{label:wp.i18n.__("Descending","jobboardwp"),value:"DESC"}],g=h.types,f=h.attributes.type,v=[{id:"",name:""}],E=h.categories,k=h.attributes.category,C=[{id:"",name:""}],x=h.attributes.filled_only,N=h.attributes.content,S="-hide";function A(e,t){var o=[];return"user"===t?e.map(function(e){o.push({label:e.name,value:e.id})}):"type"===t?e.map(function(e){o.push({label:e.name,value:e.id})}):"category"===t&&e.map(function(e){o.push({label:e.name,value:e.id})}),o}function T(e,t,o,n,l,a,r,i,s,b,p,c,d,_,u,j,m){var w="[jb_jobs";void 0!==e&&""!==e&&(w=w+' employer-id="'+e+'"'),void 0!==t&&""!==t&&(w=w+' per-page="'+t+'"'),w+=!0===o?' no-logo="1"':' no-logo="0"',w+=!0===n?' hide-filled="1"':' hide-filled="0"',w+=!0===l?' hide-expired="1"':' hide-expired="0"',w+=!0===a?' hide-search="1"':' hide-search="0"',w+=!0===r?' hide-location-search="1"':' hide-location-search="0"',w+=!0===i?' hide-filters="1"':' hide-filters="0"',w+=!0===s?' hide-job-types="1"':' hide-job-types="0"',void 0!==b&&""!==b&&(w=w+' no-jobs-text="'+b+'"'),void 0!==p&&""!==p&&(w=w+' no-jobs-search-text="'+p+'"'),void 0!==c&&""!==c&&(w=w+' load-more-text="'+c+'"'),void 0!==_&&""!==_&&(w=w+' type="'+_+'"'),void 0!==d&&""!==d&&(w=w+' category="'+d+'"'),void 0!==u&&(w=w+' orderby="'+u+'"'),void 0!==j&&(w=w+' order="'+j+'"'),w+=!0===m?' filled-only="1"':' filled-only="0"',w+="]",h.setAttributes({content:w})}if(null!==e&&(o=o.concat(e)),null!==g&&(v=v.concat(g),0!==g.length&&(S="")),null!==E&&(C=C.concat(E),0!==E.length&&(S="")),!o||!v||!C)return wp.element.createElement("p",{className:n},wp.element.createElement(wp.components.Spinner,null),wp.i18n.__("Loading data","jobboardwp"));if(0===o.length||0===v.length||0===C.length)return wp.element.createElement("p",null,wp.i18n.__("No data","jobboardwp"));void 0===N&&h.setAttributes({content:"[jb_jobs]"});var B=A(C,"category"),J=A(o,"user"),R=A(v,"type");return wp.element.createElement("div",{},[wp.element.createElement(wp.components.ServerSideRender,{block:"jb-block/jb-jobs-list",attributes:h.attributes}),wp.element.createElement(wp.blockEditor.InspectorControls,{},wp.element.createElement(wp.components.PanelBody,{title:wp.i18n.__("Jobs list","jobboardwp")},wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select employer","jobboardwp"),className:"jb_select_employer",value:h.attributes.user_id,options:J,onChange:function(e){h.setAttributes({user_id:e}),T(e,l,a,r,i,s,b,p,c,d,_,u,k,f,j,m,x)}}),wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("Per page","jobboardwp"),className:"jb_per_page",type:"number",min:1,value:h.attributes.per_page,onChange:function(e){""===e&&(e=1),h.setAttributes({per_page:e}),T(t,e,a,r,i,s,b,p,c,d,_,u,k,f,j,m,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide logo","jobboardwp"),className:"jb_no_logo",checked:h.attributes.no_logo,onChange:function(e){h.setAttributes({no_logo:e}),T(t,l,e,r,i,s,b,p,c,d,_,u,k,f,j,m,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide filled","jobboardwp"),className:"jb_hide_filled",checked:h.attributes.hide_filled,onChange:function(e){h.setAttributes({hide_filled:e}),T(t,l,a,e,i,s,b,p,c,d,_,u,k,f,j,m,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide expired","jobboardwp"),className:"jb_hide_expired",checked:h.attributes.hide_expired,onChange:function(e){h.setAttributes({hide_expired:e}),T(t,l,a,r,e,s,b,p,c,d,_,u,k,f,j,m,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide search","jobboardwp"),className:"jb_hide_search",checked:h.attributes.hide_search,onChange:function(e){h.setAttributes({hide_search:e}),T(t,l,a,r,i,e,b,p,c,d,_,u,k,f,j,m,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide location search","jobboardwp"),className:"jb_hide_location_search",checked:h.attributes.hide_location_search,onChange:function(e){h.setAttributes({hide_location_search:e}),T(t,l,a,r,i,s,e,p,c,d,_,u,k,f,j,m,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide filters","jobboardwp"),className:"jb_hide_filters",checked:h.attributes.hide_filters,onChange:function(e){h.setAttributes({hide_filters:e}),T(t,l,a,r,i,s,b,e,c,d,_,u,k,f,j,m,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide job types","jobboardwp"),className:"jb_hide_job_types",checked:h.attributes.hide_job_types,onChange:function(e){h.setAttributes({hide_job_types:e}),T(t,l,a,r,i,s,b,p,e,d,_,u,k,f,j,m,x)}}),wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("No jobs text","jobboardwp"),className:"jb_no_jobs_text",type:"text",value:h.attributes.no_jobs_text,onChange:function(e){h.setAttributes({no_jobs_text:e}),T(t,l,a,r,i,s,b,p,c,e,_,u,k,f,j,m,x)}}),wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("No job search text","jobboardwp"),className:"jb_no_job_search_text",type:"text",value:h.attributes.no_job_search_text,onChange:function(e){h.setAttributes({no_job_search_text:e}),T(t,l,a,r,i,s,b,p,c,d,e,u,k,f,j,m,x)}}),wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("Load more text","jobboardwp"),className:"jb_load_more_text",type:"text",value:h.attributes.load_more_text,onChange:function(e){h.setAttributes({load_more_text:e}),T(t,l,a,r,i,s,b,p,c,d,_,e,k,f,j,m,x)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select category","jobboardwp"),className:"jb_select_category-hide",value:h.attributes.category,options:B,onChange:function(e){h.setAttributes({category:e}),T(t,l,a,r,i,s,b,p,c,d,_,u,e,f,j,m,x)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select type","jobboardwp"),className:"jb_select_type"+S,value:h.attributes.type,options:R,onChange:function(e){h.setAttributes({type:e}),T(t,l,a,r,i,s,b,p,c,d,_,u,k,e,j,m,x)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select order by","jobboardwp"),className:"jb_select_orderby",value:h.attributes.orderby,options:w,onChange:function(e){h.setAttributes({orderby:e}),T(t,l,a,r,i,s,b,p,c,d,_,u,k,f,e,m,x)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select order","jobboardwp"),className:"jb_select_order",value:h.attributes.order,options:y,onChange:function(e){h.setAttributes({order:e}),T(t,l,a,r,i,s,b,p,c,d,_,u,k,f,j,e,x)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Filled only","jobboardwp"),className:"jb_filled_only",checked:h.attributes.filled_only,onChange:function(e){h.setAttributes({filled_only:e}),T(t,l,a,r,i,s,b,p,c,d,_,u,k,f,j,m,e)}})))])}),save:function(e){return null}}),wp.blocks.registerBlockType("jb-block/jb-recent-jobs",{title:wp.i18n.__("Recent Jobs","jobboardwp"),description:wp.i18n.__("Displaying recent jobs","jobboardwp"),icon:"editor-ul",category:"jb-blocks",attributes:{number:{type:"string",default:5},no_logo:{type:"boolean",default:default_hide_logo},hide_filled:{type:"boolean",default:default_hide_filled},no_job_types:{type:"boolean",default:default_hide_job_types},category:{type:"select"},type:{type:"select"},orderby:{type:"select",default:"date"},remote_only:{type:"boolean",default:!1}},edit:wp.data.withSelect(function(e){return{types:e("core").getEntityRecords("taxonomy","jb-job-type",{per_page:-1,_fields:["id","name"]}),categories:e("core").getEntityRecords("taxonomy","jb-job-category",{per_page:-1,_fields:["id","name"]})}})(function(b){var e=b.className,t=b.attributes.number,o=b.attributes.no_logo,n=b.attributes.no_job_types,l=b.attributes.hide_filled,a=b.attributes.orderby,r=[{label:wp.i18n.__("Posting date","jobboardwp"),value:"date"},{label:wp.i18n.__("Expiry date","jobboardwp"),value:"expiry_date"}],i=b.types,s=b.attributes.type,p=[{id:"",name:""}],c=b.categories,d=b.attributes.category,_=[{id:"",name:""}],u=b.attributes.remote_only,j=b.attributes.content,m="-hide",w="-hide";function h(e,t){var o=[];return"type"===t?e.map(function(e){o.push({label:e.name,value:e.id})}):"category"===t&&e.map(function(e){o.push({label:e.name,value:e.id})}),o}function y(e,t,o,n,l,a,r,i){var s="[jb_recent_jobs";void 0!==e&&""!==e?s=s+' number="'+e+'"':s+=' number="5"',s+=!0===r?' no_logo="1"':' no_logo="0"',s+=!0===a?' hide_filled="1"':' hide_filled="0"',s+=!0===i?' no_job_types="1"':' no_job_types="0"',void 0!==o&&""!==o&&(s=s+' type="'+o+'"'),void 0!==t&&""!==t&&(s=s+' category="'+t+'"'),void 0!==l&&(s=s+' orderby="'+l+'"'),s+=!0===n?' remote_only="1"':' remote_only="0"',s+="]",b.setAttributes({content:s})}if(null!==i&&(p=p.concat(i),0!==i.length&&(w="")),null!==c&&(_=_.concat(c),0!==c.length&&(m="")),!p||!_)return wp.element.createElement("p",{className:e},wp.element.createElement(wp.components.Spinner,null),wp.i18n.__("Loading data","jobboardwp"));if(0===p.length||0===_.length)return wp.element.createElement("p",null,wp.i18n.__("No data","jobboardwp"));void 0===j&&b.setAttributes({content:"[jb_recent_jobs]"});var g=h(_,"category"),f=h(p,"type");return wp.element.createElement("div",{},[wp.element.createElement(wp.components.ServerSideRender,{block:"jb-block/jb-recent-jobs",attributes:b.attributes}),wp.element.createElement(wp.blockEditor.InspectorControls,{},wp.element.createElement(wp.components.PanelBody,{title:wp.i18n.__("Recent jobs","jobboardwp")},wp.element.createElement(wp.components.TextControl,{label:wp.i18n.__("Number","jobboardwp"),className:"jb_number",type:"number",min:1,value:b.attributes.number,onChange:function(e){""===e&&(e=1),b.setAttributes({number:e}),y(e,d,s,u,a,l,o,n)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide logo","jobboardwp"),className:"jb_no_logo",checked:b.attributes.no_logo,onChange:function(e){b.setAttributes({no_logo:e}),y(t,d,s,u,a,l,e,n)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide filled","jobboardwp"),className:"jb_hide_filled",checked:b.attributes.hide_filled,onChange:function(e){b.setAttributes({hide_filled:e}),y(t,d,s,u,a,e,o,n)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Hide job types","jobboardwp"),className:"jb_no_job_types",checked:b.attributes.no_job_types,onChange:function(e){b.setAttributes({no_job_types:e}),y(t,d,s,u,a,l,o,e)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select category","jobboardwp"),className:"jb_select_category"+m,value:b.attributes.category,options:g,onChange:function(e){b.setAttributes({category:e}),y(t,e,s,u,a,l,o,n)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select type","jobboardwp"),className:"jb_select_type"+w,value:b.attributes.type,options:f,onChange:function(e){b.setAttributes({type:e}),y(t,d,e,u,a,l,o,n)}}),wp.element.createElement(wp.components.SelectControl,{label:wp.i18n.__("Select order by","jobboardwp"),className:"jb_select_orderby",value:b.attributes.orderby,options:r,onChange:function(e){b.setAttributes({orderby:e}),y(t,d,s,u,e,l,o,n)}}),wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Remote only","jobboardwp"),className:"jb_remote_only",checked:b.attributes.remote_only,onChange:function(e){b.setAttributes({remote_only:e}),y(t,d,s,e,a,l,o,n)}})))])}),save:function(e){return null}});