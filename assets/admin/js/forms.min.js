jQuery(document).ready(function(a){"function"==typeof a.fn.select2&&(jQuery(".jb-pages-select2").select2({ajax:{url:wp.ajax.settings.url,dataType:"json",delay:250,data:function(e){return{search:e.term,action:"jb_get_pages_list",page:e.page||1,nonce:jb_admin_data.nonce}},processResults:function(e,a){a.page=a.page||1;var i=[];return e&&jQuery.each(e,function(e,a){"total_count"!==e&&i.push({id:a[0],text:a[1]})}),{results:i,pagination:{more:10*a.page<e.total_count}}},cache:!0},placeholder:jQuery(this).data("placeholder"),minimumInputLength:0,allowClear:!0}),a(".jb-s1").select2({allowClear:!0,placeholder:jQuery(this).data("placeholder")}),a(".jb-s2").select2({allowClear:!1,placeholder:jQuery(this).data("placeholder")}),a(".jb-s3").select2({tags:!0,allowClear:!0,placeholder:jQuery(this).data("placeholder")}));var e=a(".jb-admin-colorpicker");e.length&&e.wpColorPicker();var i,t=a(".jb-datepicker");(t.length&&t.each(function(){var e=a(this);e.datepicker({altField:e.siblings(".jb-datepicker-default-format"),altFormat:"yy-mm-dd"})}),a(document.body).on("change",".jb-datepicker",function(){var e=a(this);""===e.val()&&e.siblings(".jb-datepicker-default-format").val("")}),jb_init_helptips(),jQuery(".jb-media-upload").each(function(){var e=jQuery(this).find(".jb-forms-field"),a=e.data("default");""!==e.val()&&e.val()!==a?(e.siblings(".jb-set-image").hide(),e.siblings(".jb-clear-image").show(),e.siblings(".icon_preview").show()):(e.val()===a&&e.siblings(".icon_preview").show(),e.siblings(".jb-set-image").show(),e.siblings(".jb-clear-image").hide())}),"undefined"!=typeof wp&&wp.media&&wp.media.editor)&&(jQuery(".jb-set-image").click(function(e){var a=jQuery(this);e.preventDefault(),i&&i.remove(),(i=wp.media({title:a.data("upload_frame"),button:{text:php_data.texts.select},multiple:!1})).on("select",function(){var e=i.state().get("selection").first().toJSON();a.siblings(".icon_preview").attr("src",e.url).show(),a.siblings(".jb-forms-field").val(e.url),a.siblings(".jb-media-upload-data-id").val(e.id),a.siblings(".jb-media-upload-data-width").val(e.width),a.siblings(".jb-media-upload-data-height").val(e.height),a.siblings(".jb-media-upload-data-thumbnail").val(e.thumbnail),a.siblings(".jb-media-upload-data-url").trigger("change"),a.siblings(".jb-media-upload-url").val(e.url),a.siblings(".jb-clear-image").show(),a.hide(),jQuery(document).trigger("jb_media_upload_select",[a,e])}),i.open()}),jQuery(".icon_preview").click(function(e){jQuery(this).siblings(".jb-set-image").trigger("click")}),jQuery(".jb-clear-image").click(function(){var e=jQuery(this),a=e.siblings(".jb-forms-field").data("default");e.siblings(".jb-set-image").show(),e.hide(),e.siblings(".icon_preview").attr("src",a),e.siblings(".jb-media-upload-data-id").val(""),e.siblings(".jb-media-upload-data-width").val(""),e.siblings(".jb-media-upload-data-height").val(""),e.siblings(".jb-media-upload-data-thumbnail").val(""),e.siblings(".jb-forms-field").val(a),e.siblings(".jb-media-upload-data-url").trigger("change"),e.siblings(".jb-media-upload-url").val(a),jQuery(document).trigger("jb_media_upload_clear",e)}));function l(){jQuery(".jb-forms-line").removeClass("jb-forms-line-conditioned").each(function(){void 0===jQuery(this).data("conditional")||jQuery(this).hasClass("jb-forms-line-conditioned")||(!function l(e){e.addClass("jb-forms-line-conditioned");var a=e.data("conditional");var i=a[1];var r=a[2];var s=e.data("prefix");var n=!0;if(-1===a[0].indexOf("||")){var t=jQuery("#"+s+"_"+a[0]);void 0!==t.parents(".jb-forms-line").data("conditional")&&(n=l(t.parents(".jb-forms-line")))}var d="";var o="";var c=!1;if("="===i){if(-1!==a[0].indexOf("||")){var u=!1,b=a[0].split("||");return jQuery.each(b,function(e){var a=jQuery("#"+s+"_"+b[e]);n=!(c=!1),void 0!==a.parents(".jb-forms-line").data("conditional")&&(n=l(a.parents(".jb-forms-line")));var i=a.prop("tagName").toLowerCase();if("input"===i){var t=a.attr("type");c="checkbox"===t?"1"==r?a.is(":checked"):!a.is(":checked"):Array.isArray(r)?-1!==r.indexOf(a.val()):a.val()===r}else"select"===i&&(c=Array.isArray(r)?-1!==r.indexOf(a.val()):a.val()===r);c&&n&&(u=!0)}),u}"input"===(d=t.prop("tagName").toLowerCase())?(o=t.attr("type"),c="checkbox"===o?"1"===r?t.is(":checked"):!t.is(":checked"):Array.isArray(r)?-1!==r.indexOf(t.val()):t.val()===r):"select"===d&&(c=Array.isArray(r)?-1!==r.indexOf(t.val()):t.val()===r)}else"!="===i&&("input"===(d=t.prop("tagName").toLowerCase())?(o=t.attr("type"),c="checkbox"===o?"1"===r?!t.is(":checked"):t.is(":checked"):t.val()!==r):"select"===d&&(c=t.val()!==r));return c&&n}(jQuery(this))?jQuery(this).hide():jQuery(this).show())})}jQuery(document.body).on("change",".jb-forms-field",function(){(0<jQuery(".jb-forms-line[data-conditional*='\""+jQuery(this).data("field_id")+"\",']").length||0<jQuery(".jb-forms-line[data-conditional*='"+jQuery(this).data("field_id")+"|']").length||0<jQuery(".jb-forms-line[data-conditional*='|"+jQuery(this).data("field_id")+"']").length)&&l()}),l()});