"object"!=typeof wp.JB&&(wp.JB={}),"object"!=typeof wp.JB.forms&&(wp.JB.forms={}),wp.JB.forms={classes:{form:"jb-form",row:"jb-form-row"},objects:{wrapper:{},rows:{}},setObjects:function(){wp.JB.forms.objects.wrapper=jQuery("."+wp.JB.forms.classes.form),wp.JB.forms.objects.rows=jQuery("."+wp.JB.forms.classes.row)},conditionalFields:{trigger:function(){jQuery(".jb-form-row").removeClass("jb-forms-line-conditioned").each(function(){var e;void 0===jQuery(this).data("conditional")||jQuery(this).hasClass("jb-forms-line-conditioned")||(e=jQuery(this).attr("data-required"),wp.JB.forms.conditionalFields.checkLineCondition(jQuery(this))?(jQuery(this).show(),jQuery(this).find("select, input").prop("disabled",!1),"required"===e&&jQuery(this).find("select, input").attr("required","required")):(jQuery(this).hide(),jQuery(this).find("select, input").removeAttr("required").prop("disabled",!0)))})},checkLineCondition:function(e){e.addClass("jb-forms-line-conditioned");var a,t,o,e=e.data("conditional"),i=e[1],r=e[2],n=!0,s=(-1===e[0].indexOf("||")&&void 0!==(a=jQuery("#"+e[0])).parents(".jb-form-row").data("conditional")&&(n=wp.JB.forms.conditionalFields.checkLineCondition(a.parents(".jb-form-row"))),""),d="",l=!1;if("="===i){if(-1!==e[0].indexOf("||"))return t=!1,o=e[0].split("||"),jQuery.each(o,function(e){var a,e=jQuery("#"+o[e]),i=(n=!(l=!1),void 0!==e.parents(".jb-form-row").data("conditional")&&(n=wp.JB.forms.conditionalFields.checkLineCondition(e.parents(".jb-form-row"))),e.prop("tagName").toLowerCase());"input"===i?(a=e.attr("type"),l="checkbox"===a?"1"==r?e.is(":checked"):!e.is(":checked"):Array.isArray(r)?-1!==r.indexOf(e.val()):e.val()===r):"select"===i&&(l=Array.isArray(r)?-1!==r.indexOf(e.val()):e.val()===r),l&&n&&(t=!0)}),t;"input"===(s=a.prop("tagName").toLowerCase())?(d=a.attr("type"),l="checkbox"===d?"1"===r?a.is(":checked"):!a.is(":checked"):Array.isArray(r)?-1!==r.indexOf(a.val()):a.val()===r):"select"===s&&(l=Array.isArray(r)?-1!==r.indexOf(a.val()):a.val()===r)}else"!="===i&&("input"===(s=a.prop("tagName").toLowerCase())?(d=a.attr("type"),l="checkbox"===d?"1"===r?!a.is(":checked"):a.is(":checked"):a.val()!==r):"select"===s&&(l=a.val()!==r));return l&&n}}},jQuery(document).ready(function(i){wp.JB.forms.setObjects();var n,s={},e=i(".jb-datepicker");e.length&&e.each(function(){var e=i(this);e.datepicker({altField:e.siblings(".jb-datepicker-default-format"),altFormat:"yy-mm-dd"})}),i(document.body).on("change",".jb-datepicker",function(){var e=i(this);""===e.val()&&e.siblings(".jb-datepicker-default-format").val("")}),i(document.body).on("click","input.jb-forms-condition-option",function(){var e=i(this).val();i(this).parents("."+wp.JB.forms.classes.row).find("span[data-visible-if]").hide().find("input, select").attr("disabled","disabled").prop("disabled",!0),i(this).parents("."+wp.JB.forms.classes.row).find('span[data-visible-if="'+e+'"]').show().find("input, select").removeAttr("disabled").prop("disabled",!1)}),i("input.jb-forms-condition-option:checked").trigger("click"),i(document.body).on("click",".jb-change-media",function(e){e.preventDefault(),i(this).parents(".jb-uploaded-wrapper").removeClass("jb-uploaded").addClass("jb-waiting-change"),i(this).parents(".jb-uploaded-wrapper").siblings(".jb-uploader").removeClass("jb-uploaded")}),i(document.body).on("click",".jb-cancel-change-media",function(e){e.preventDefault(),i(this).parents(".jb-uploaded-wrapper").addClass("jb-uploaded").removeClass("jb-waiting-change"),i(this).parents(".jb-uploaded-wrapper").siblings(".jb-uploader").addClass("jb-uploaded")}),i(document.body).on("click",".jb-clear-media",function(e){e.preventDefault();e=i(this).parents(".jb-form-field-content").attr("data-uploader");s[e].splice(),i(this).parents(".jb-uploaded-wrapper").siblings(".jb-media-value").val(""),i(this).parents(".jb-uploaded-wrapper").siblings(".jb-media-value-hash").val(""),i(this).parents(".jb-uploaded-wrapper").removeClass("jb-uploaded").removeClass("jb-waiting-change"),i(this).parents(".jb-uploaded-wrapper").siblings(".jb-uploader").removeClass("jb-uploaded")}),i(".jb-select-media").each(function(){var o=i(this),e=o.data("action"),t=o.parents(".jb-uploader-dropzone"),a=o.parents(".jb-select-media-button-wrapper"),r=t.siblings(".jb-uploader-errorlist"),a={browse_button:o.get(0),drop_element:t.get(0),container:a.get(0),url:wp.ajax.settings.url+"?action="+e+"&nonce="+jb_front_data.nonce,chunk_size:"1024kb",max_retries:1,multipart:!0,multi_selection:!1,filters:{max_file_size:"10mb",mime_types:[{title:wp.i18n.__("Image files","jobboardwp"),extensions:"jpg,jpeg,gif,png,bmp,ico,tiff"}],prevent_duplicates:!0,max_file_count:1},init:{Error:function(e,a){r.html("<p>"+wp.i18n.__("Error!","jobboardwp")+" "+a.message+"</p>")},FileFiltered:function(i,e){r.empty(),i.getOption("multi_selection")||t.find(".jb-uploader-file").each(function(e,a){i.removeFile(a.id)})},FilesAdded:function(e,a){e.start()},FilesRemoved:function(e,a){i.each(a,function(e,a){i("#"+a.id).remove()}),t.find(".jb-uploader-file").length||r.empty()},FileUploaded:function(e,a,i){var t;200===i.status&&i.response?(t=JSON.parse(i.response))?t.info&&0===t.OK?console.error(t.info):t.data&&(o.parents(".jb-uploader").addClass("jb-uploaded"),o.parents(".jb-uploader").siblings(".jb-uploaded-wrapper").addClass("jb-uploaded").removeClass("jb-waiting-change"),o.parents(".jb-uploader").siblings(".jb-uploaded-wrapper").find("img").attr("src",t.data[0].url),wp.hooks.doAction("jb_job_uploader_after_success_upload",o,t),o.parents(".jb-uploader").siblings(".jb-media-value").val(t.data[0].name_saved),o.parents(".jb-uploader").siblings(".jb-media-value-hash").val(t.data[0].hash)):r.append("<p>"+wp.i18n.__("Error! Wrong file upload server response.","jobboardwp")+"</p>"):console.error(wp.i18n.__("File was not loaded, Status Code %s","jobboardwp"),[i.status])},PostInit:function(e){t.find(".jb-uploader-file").remove()},UploadProgress:function(e,a){i("#"+a.id).find("b").html("<span>"+a.percent+"%</span>")},UploadComplete:function(e,a){}}},a=wp.hooks.applyFilters("jb_job_uploader_filters_attrs",a,o);n=new plupload.Uploader(a),(s[n.id]=n).init(),i(this).parents(".jb-form-field-content").attr("data-uploader",n.id)}),jQuery(document.body).on("change",".jb-forms-field",function(){(0<jQuery(".jb-form-row[data-conditional*='\""+jQuery(this).data("field_id")+"\",']").length||0<jQuery(".jb-form-row[data-conditional*='"+jQuery(this).data("field_id")+"|']").length||0<jQuery(".jb-form-row[data-conditional*='|"+jQuery(this).data("field_id")+"']").length)&&wp.JB.forms.conditionalFields.trigger()}),wp.JB.forms.conditionalFields.trigger(),i(document.body).on("submit",'.jb-form[name="jb-company-details"]',function(){window.history&&window.history.replaceState({},document.title,window.location.pathname),i(this).find(".jb-form-button").attr("disabled",!0).prop("disabled",!0)})});