"object"!=typeof wp.JB&&(wp.JB={}),"object"!=typeof wp.JB.jobs_list&&(wp.JB.jobs_list={}),wp.JB.jobs_list={first_load:!0,is_search:!1,objects:{wrapper:jQuery(".jb-jobs")},is_busy:function(){return wp.JB.jobs_list.objects.wrapper.hasClass("jb-busy")},preloader:{show:function(){wp.JB.jobs_list.objects.wrapper.addClass("jb-busy").find(".jb-overlay").show()},hide:function(){wp.JB.jobs_list.objects.wrapper.removeClass("jb-busy").find(".jb-overlay").hide()}},url:{set:function(o,e){var t=wp.JB.jobs_list.url.get(),a={};jQuery.isArray(e)?(jQuery.each(e,function(s){e[s]=encodeURIComponent(e[s])}),e=e.join("||")):jQuery.isNumeric(e)||(e=e.split("||"),jQuery.each(e,function(s){e[s]=encodeURIComponent(e[s])}),e=e.join("||")),""!==e&&(a[o]=e),jQuery.each(t,function(s){o===s?""!==e&&(a[s]=e):a[s]=t[s]});var r=[];jQuery.each(a,function(s){r.push(s+"="+a[s])});var s="?"+(r=wp.hooks.applyFilters("jb_job_dashboard_url_attrs",r)).join("&");"?"===s&&(s=""),window.history.pushState("string","JB Jobs Dashboard",window.location.origin+window.location.pathname+s)},get:function(s){var o={},e=wp.JB.jobs_list.url.parse();if(jQuery.each(e,function(s){""!==e[s]&&(o[s]=e[s])}),s){if(void 0!==o[s])try{o[s]=decodeURIComponent(o[s])}catch(s){console.error(s)}return o[s]}return o},parse:function(){var e={},s=window.location.search.substring(1);if(""!==s){var t=s.split("&");jQuery.each(t,function(s){var o=t[s].split("=");e[o[0]]=o[1]})}return e},get_page:function(){var s=wp.JB.jobs_list.objects.wrapper.data("page");return s&&void 0!==s||(s=1),s},get_search:function(){return wp.JB.jobs_list.objects.wrapper.find(".jb-search-line").length?wp.JB.jobs_list.objects.wrapper.find(".jb-search-line").val():""},get_location:function(){return wp.JB.jobs_list.objects.wrapper.find(".jb-search-location").length?wp.JB.jobs_list.objects.wrapper.find(".jb-search-location").val():""},get_type:function(){return wp.JB.jobs_list.objects.wrapper.find(".jb-only-remote").length?wp.JB.jobs_list.objects.wrapper.find(".jb-only-remote").is(":checked")?1:0:""},get_type_tag:function(){return wp.JB.jobs_list.objects.wrapper.find(".jb-job-type-filter").length?wp.JB.jobs_list.objects.wrapper.find(".jb-job-type-filter").val():""},get_category:function(){return wp.JB.jobs_list.objects.wrapper.find(".jb-job-category-filter").length?wp.JB.jobs_list.objects.wrapper.find(".jb-job-category-filter").val():""}},ajax:function(e){var s={page:wp.JB.jobs_list.url.get_page(),search:wp.JB.jobs_list.url.get_search(),location:wp.JB.jobs_list.url.get_location(),remote_only:wp.JB.jobs_list.url.get_type(),type:wp.JB.jobs_list.url.get_type_tag(),category:wp.JB.jobs_list.url.get_category(),nonce:jb_front_data.nonce};wp.JB.jobs_list.is_search=!!(s.search||s.location||s.remote_only),wp.JB.jobs_list.first_load&&(1<s.page&&(s.get_previous=!0),wp.JB.jobs_list.first_load=!1),s=wp.hooks.applyFilters("jb_jobs_request",s),wp.JB.jobs_list.preloader.show(),wp.ajax.send("jb-get-jobs",{data:s,success:function(s){var o=wp.template("jb-jobs-list-line");e?wp.JB.jobs_list.objects.wrapper.find(".jb-jobs-wrapper").append(o(s.jobs)):wp.JB.jobs_list.objects.wrapper.find(".jb-jobs-wrapper").html(o(s.jobs)),wp.JB.jobs_list.objects.wrapper.data("total_pages",s.pagination.total_pages),0<s.pagination.total_pages?(wp.JB.jobs_list.objects.wrapper.find(".jb-jobs-wrapper").removeClass("jb-no-jobs"),s.pagination.total_pages==s.pagination.current_page?wp.JB.jobs_list.objects.wrapper.find(".jb-load-more-jobs").hide():wp.JB.jobs_list.objects.wrapper.find(".jb-load-more-jobs").show()):(e||(wp.JB.jobs_list.is_search?wp.JB.jobs_list.objects.wrapper.find(".jb-jobs-wrapper").html(wp.JB.jobs_list.objects.wrapper.data("no-jobs-search")):wp.JB.jobs_list.objects.wrapper.find(".jb-jobs-wrapper").html(wp.JB.jobs_list.objects.wrapper.data("no-jobs"))),wp.JB.jobs_list.objects.wrapper.find(".jb-jobs-wrapper").addClass("jb-no-jobs"),wp.JB.jobs_list.objects.wrapper.find(".jb-load-more-jobs").hide()),wp.hooks.doAction("jb_jobs_list_loaded",s),wp.JB.jobs_list.objects.wrapper.find(".jb-do-search").removeClass("disabled"),wp.JB.jobs_list.preloader.hide()},error:function(s){console.log(s),wp.JB.jobs_list.preloader.hide(),wp.JB.jobs_list.objects.wrapper.find(".jb-do-search").removeClass("disabled")}})}},jQuery(document).ready(function(a){wp.JB.jobs_list.objects.wrapper.length&&wp.JB.jobs_list.ajax(),a(document.body).on("click",".jb-do-search",function(){if(!a(this).hasClass("disabled")&&!wp.JB.jobs_list.is_busy()){wp.JB.jobs_list.preloader.show(),wp.JB.jobs_list.objects.wrapper.data("page",1),wp.JB.jobs_list.url.set("jb-page","");var s=wp.JB.jobs_list.url.get_search();wp.JB.jobs_list.url.set("jb-search",s);var o=wp.JB.jobs_list.url.get_location();wp.JB.jobs_list.url.set("jb-location-search",o),a(this).addClass("disabled"),wp.JB.jobs_list.ajax()}}),a(document.body).on("keypress",".jb-search-line, .jb-search-location",function(s){if(13===s.which){var o=a(this).parents(".jb-jobs").find(".jb-do-search");if(o.hasClass("disabled"))return;if(wp.JB.jobs_list.is_busy())return;wp.JB.jobs_list.preloader.show(),wp.JB.jobs_list.objects.wrapper.data("page",1),wp.JB.jobs_list.url.set("jb-page","");var e=wp.JB.jobs_list.url.get_search();wp.JB.jobs_list.url.set("jb-search",e);var t=wp.JB.jobs_list.url.get_location();wp.JB.jobs_list.url.set("jb-location-search",t),o.addClass("disabled"),wp.JB.jobs_list.ajax()}}),a(document.body).on("click",".jb-only-remote",function(){if(wp.JB.jobs_list.objects.wrapper.find(".jb-do-search").addClass("disabled"),!wp.JB.jobs_list.is_busy()){wp.JB.jobs_list.preloader.show(),wp.JB.jobs_list.objects.wrapper.data("page",1),wp.JB.jobs_list.url.set("jb-page","");var s=wp.JB.jobs_list.url.get_type();s?wp.JB.jobs_list.url.set("jb-is-remote",s):wp.JB.jobs_list.url.set("jb-is-remote",""),wp.JB.jobs_list.ajax()}}),a(document.body).on("change",".jb-job-type-filter",function(){wp.JB.jobs_list.objects.wrapper.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.is_busy()||(wp.JB.jobs_list.preloader.show(),wp.JB.jobs_list.objects.wrapper.data("page",1),wp.JB.jobs_list.url.set("jb-page",""),wp.JB.jobs_list.url.set("jb-job-type",a(this).val()),wp.JB.jobs_list.ajax())}),a(document.body).on("change",".jb-job-category-filter",function(){wp.JB.jobs_list.objects.wrapper.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.is_busy()||(wp.JB.jobs_list.preloader.show(),wp.JB.jobs_list.objects.wrapper.data("page",1),wp.JB.jobs_list.url.set("jb-page",""),wp.JB.jobs_list.url.set("jb-job-category",a(this).val()),wp.JB.jobs_list.ajax())}),a(document.body).on("click",".jb-load-more-jobs",function(){if(!a(this).hasClass("disabled")&&!wp.JB.jobs_list.is_busy()){wp.JB.jobs_list.preloader.show();var s=+wp.JB.jobs_list.objects.wrapper.data("page")+1;wp.JB.jobs_list.objects.wrapper.data("page",s),wp.JB.jobs_list.url.set("jb-page",s),wp.JB.jobs_list.ajax(!0)}}),window.addEventListener("popstate",function(s){wp.JB.jobs_list.objects.wrapper.length&&wp.JB.jobs_list.ajax()})});