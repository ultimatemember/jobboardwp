"object"!=typeof wp.JB&&(wp.JB={}),"object"!=typeof wp.JB.jobs_list&&(wp.JB.jobs_list={}),wp.JB.jobs_list={wrapper_selector:".jb-jobs",first_load:!0,is_search:!1,objects:{wrapper:jQuery(".jb-jobs")},get_wrapper_index:function(e){return e.data("wrapper-index")},is_busy:function(e){return e.hasClass("jb-busy")},preloader:{show:function(e){e.addClass("jb-busy").find(".jb-overlay").show()},hide:function(e){e.removeClass("jb-busy").find(".jb-overlay").hide()}},url:{set:function(e,t,s){var o=wp.JB.jobs_list.url.get(),a=wp.JB.jobs_list.get_wrapper_index(e),i={},r=(jQuery.isArray(s)?(jQuery.each(s,function(e){s[e]=encodeURIComponent(s[e])}),s=s.join("||")):jQuery.isNumeric(s)||(s=s.split("||"),jQuery.each(s,function(e){s[e]=encodeURIComponent(s[e])}),s=s.join("||")),""!==s&&(i[t+"["+a+"]"]=s),jQuery.each(o,function(e){t+"["+a+"]"===e?""!==s&&(i[e]=s):i[e]=o[e]}),[]),e=(jQuery.each(i,function(e){r.push(e+"="+i[e])}),"?"+(r=wp.hooks.applyFilters("jb_job_dashboard_url_attrs",r)).join("&"));"?"===e&&(e=""),window.history.pushState("string","JB Jobs List",window.location.origin+window.location.pathname+e)},get:function(e,t){var s={},o=wp.JB.jobs_list.url.parse();if(jQuery.each(o,function(e){""!==o[e]&&(s[e]=o[e])}),t){if(void 0!==s[t])try{s[t]=decodeURIComponent(s[t])}catch(e){console.error(e)}return s[t]}return s},parse:function(){var t,s={},e=window.location.search.substring(1);return""!==e&&(t=e.split("&"),jQuery.each(t,function(e){e=t[e].split("=");s[e[0]]=e[1]})),s},get_page:function(e){e=e.data("page");return e=e&&void 0!==e?e:1},get_per_page:function(e){e=e.data("per-page");return e=e&&void 0!==e?e:null},get_employer:function(e){e=e.data("employer");return e=e&&void 0!==e?e:""},get_logo:function(e){e=e.data("no-logo");return e=void 0===e?null:e},get_hide_job_types:function(e){e=e.data("hide-job-types");return e=void 0===e?null:e},get_search:function(e){return e.find(".jb-search-line").length?e.find(".jb-search-line").val():""},get_location:function(e){return e.find(".jb-search-location").length?e.find(".jb-search-location").val():""},get_type:function(e){return e.find(".jb-only-remote").length?e.find(".jb-only-remote").is(":checked")?1:0:""},get_type_tag:function(e){return e.find(".jb-job-type-filter").length?e.find(".jb-job-type-filter").val():e.data("type")},get_category:function(e){return e.find(".jb-job-category-filter").length?e.find(".jb-job-category-filter").val():e.data("category")},get_hide_expired:function(e){e=e.data("hide-expired");return e=void 0===e?null:e},get_hide_filled:function(e){e=e.data("hide-filled");return e=void 0===e?null:e},get_filled_only:function(e){e=e.data("filled-only");return e=void 0===e?null:e},get_orderby:function(e){e=e.data("orderby");return e=void 0===e?"date":e},get_order:function(e){e=e.data("order");return e=void 0===e?"DESC":e},get_salary:function(e){let t;return t=e.find(".jb-double-range").length&&1===e.find(".jb-double-range").data("search")?e.find(".jb-double-range").data("min")+"-"+e.find(".jb-double-range").data("max"):e.data("salary")}},ajax:function(s,o){var e={page:wp.JB.jobs_list.url.get_page(s),per_page:wp.JB.jobs_list.url.get_per_page(s),search:wp.JB.jobs_list.url.get_search(s),location:wp.JB.jobs_list.url.get_location(s),remote_only:wp.JB.jobs_list.url.get_type(s),type:wp.JB.jobs_list.url.get_type_tag(s),category:wp.JB.jobs_list.url.get_category(s),employer:wp.JB.jobs_list.url.get_employer(s),no_logo:wp.JB.jobs_list.url.get_logo(s),hide_job_types:wp.JB.jobs_list.url.get_hide_job_types(s),hide_expired:wp.JB.jobs_list.url.get_hide_expired(s),hide_filled:wp.JB.jobs_list.url.get_hide_filled(s),filled_only:wp.JB.jobs_list.url.get_filled_only(s),orderby:wp.JB.jobs_list.url.get_orderby(s),order:wp.JB.jobs_list.url.get_order(s),salary:wp.JB.jobs_list.url.get_salary(s),nonce:jb_front_data.nonce};wp.JB.jobs_list.is_search=!!(e.search||e.location||e.remote_only),wp.JB.jobs_list.first_load&&(1<e.page&&(e.get_previous=!0),wp.JB.jobs_list.first_load=!1),e=wp.hooks.applyFilters("jb_jobs_request",e,s),wp.JB.jobs_list.preloader.show(s),wp.ajax.send("jb-get-jobs",{data:e,success:function(e){var t=wp.template("jb-jobs-list-line");o?s.find(".jb-jobs-wrapper").append(t(e)):s.find(".jb-jobs-wrapper").html(t(e)),s.data("total_pages",e.pagination.total_pages),0<e.pagination.total_pages?(s.find(".jb-jobs-wrapper").removeClass("jb-no-jobs"),e.pagination.total_pages==e.pagination.current_page?s.find(".jb-load-more-jobs").hide():s.find(".jb-load-more-jobs").show()):(o||(wp.JB.jobs_list.is_search?s.find(".jb-jobs-wrapper").html(s.data("no-jobs-search")):s.find(".jb-jobs-wrapper").html(s.data("no-jobs"))),s.find(".jb-jobs-wrapper").addClass("jb-no-jobs"),s.find(".jb-load-more-jobs").hide()),wp.hooks.doAction("jb_jobs_list_loaded",e),s.find(".jb-do-search").removeClass("disabled"),wp.JB.jobs_list.preloader.hide(s)},error:function(e){console.log(e),wp.JB.jobs_list.preloader.hide(s),s.find(".jb-do-search").removeClass("disabled")}})},filters:{slider:{getValues:function(){var e=jQuery(this).parent(),t=e.data("symbol"),s=e.find("input"),o=parseFloat(s[0].value),s=parseFloat(s[1].value),a=(s<o&&(a=s,s=o,o=a),jQuery(this).parents(".jb-salary-filter").find(".jb-double-range-values"));let i=e.data("format");i=(i=i.replace(/\$\{salary\}/gi,o+" - "+s)).replace(/\$\{symbol\}/gi,t),a.html(i),e.data("min",o),e.data("max",s),e.data("search",1)}}}},jQuery(document).ready(function(l){wp.JB.jobs_list.objects.wrapper.length&&wp.JB.jobs_list.objects.wrapper.each(function(){wp.JB.jobs_list.ajax(l(this))}),l(document.body).on("click",".jb-do-search",function(){var e,t;l(this).hasClass("disabled")||(e=l(this).parents(".jb-jobs"),wp.JB.jobs_list.is_busy(e))||(wp.JB.jobs_list.preloader.show(e),e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-page",""),t=wp.JB.jobs_list.url.get_search(e),wp.JB.jobs_list.url.set(e,"jb-search",t),t=wp.JB.jobs_list.url.get_location(e),wp.JB.jobs_list.url.set(e,"jb-location-search",t),wp.hooks.doAction("jb_jobs_list_do_search",e),l(this).addClass("disabled"),wp.JB.jobs_list.ajax(e))}),l(document.body).on("keypress",".jb-search-line, .jb-search-location",function(e){var t,s;13!==e.which||(t=(e=l(this).parents(".jb-jobs")).find(".jb-do-search")).hasClass("disabled")||wp.JB.jobs_list.is_busy(e)||(wp.JB.jobs_list.preloader.show(e),e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-page",""),s=wp.JB.jobs_list.url.get_search(e),wp.JB.jobs_list.url.set(e,"jb-search",s),s=wp.JB.jobs_list.url.get_location(e),wp.JB.jobs_list.url.set(e,"jb-location-search",s),wp.hooks.doAction("jb_jobs_list_do_search",e),t.addClass("disabled"),wp.JB.jobs_list.ajax(e))}),l(document.body).on("click",".jb-only-remote",function(){var e,t=l(this).parents(".jb-jobs");wp.JB.jobs_list.is_busy(t)||(t.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.preloader.show(t),t.data("page",1),wp.JB.jobs_list.url.set(t,"jb-page",""),(e=wp.JB.jobs_list.url.get_type(t))?wp.JB.jobs_list.url.set(t,"jb-is-remote",e):wp.JB.jobs_list.url.set(t,"jb-is-remote",""),wp.JB.jobs_list.ajax(t))}),l(document.body).on("change",".jb-job-type-filter",function(){var e=l(this).parents(".jb-jobs");wp.JB.jobs_list.is_busy(e)||(e.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.preloader.show(e),e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-page",""),wp.JB.jobs_list.url.set(e,"jb-job-type",l(this).val()),wp.JB.jobs_list.ajax(e))}),l(document.body).on("change",".jb-job-category-filter",function(){var e=l(this).parents(".jb-jobs");wp.JB.jobs_list.is_busy(e)||(e.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.preloader.show(e),e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-page",""),wp.JB.jobs_list.url.set(e,"jb-job-category",l(this).val()),wp.JB.jobs_list.ajax(e))}),l(document.body).on("click",".jb-load-more-jobs",function(){var e,t=l(this).parents(".jb-jobs");l(this).hasClass("disabled")||wp.JB.jobs_list.is_busy(t)||(wp.JB.jobs_list.preloader.show(t),e=+t.data("page")+1,t.data("page",e),wp.JB.jobs_list.url.set(t,"jb-page",e),wp.JB.jobs_list.ajax(t,!0))}),l(document.body).on("change",".jb-double-range input",function(){var e=l(this).parents(".jb-jobs");if(!wp.JB.jobs_list.is_busy(e)){e.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.preloader.show(e);for(var t=document.getElementsByClassName("jb-double-range"),s=0;s<t.length;s++)for(var o=t[s].getElementsByTagName("input"),a=0;a<o.length;a++)"range"===o[a].type&&(o[a].oninput=wp.JB.jobs_list.filters.slider.getValues,o[a].oninput());var i=l(this).parents(".jb-double-range").data("min"),r=l(this).parents(".jb-double-range").data("max");e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-salary",i+"-"+r),wp.JB.jobs_list.ajax(e)}}),window.addEventListener("popstate",function(e){wp.JB.jobs_list.objects.wrapper.length&&wp.JB.jobs_list.objects.wrapper.each(function(){wp.JB.jobs_list.ajax(l(this))})})});