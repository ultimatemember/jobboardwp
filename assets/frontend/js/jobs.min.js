"object"!=typeof wp.JB&&(wp.JB={}),"object"!=typeof wp.JB.jobs_list&&(wp.JB.jobs_list={}),wp.JB.jobs_list={wrapper_selector:".jb-jobs",first_load:!0,is_search:!1,objects:{wrapper:jQuery(".jb-jobs")},get_wrapper_index:function(e){return e.data("wrapper-index")},is_busy:function(e){return e.hasClass("jb-busy")},preloader:{show:function(e){e.addClass("jb-busy").find(".jb-overlay").show()},hide:function(e){e.removeClass("jb-busy").find(".jb-overlay").hide()}},url:{set:function(e,o,s){var t=wp.JB.jobs_list.url.get();console.log(t);var a=wp.JB.jobs_list.get_wrapper_index(e),r={};jQuery.isArray(s)?(jQuery.each(s,function(e){s[e]=encodeURIComponent(s[e])}),s=s.join("||")):jQuery.isNumeric(s)||(s=s.split("||"),jQuery.each(s,function(e){s[e]=encodeURIComponent(s[e])}),s=s.join("||")),""!==s&&(r[o+"["+a+"]"]=s),jQuery.each(t,function(e){o+"["+a+"]"===e?""!==s&&(r[e]=s):r[e]=t[e]});var i=[];jQuery.each(r,function(e){i.push(e+"="+r[e])});var l="?"+(i=wp.hooks.applyFilters("jb_job_dashboard_url_attrs",i)).join("&");"?"===l&&(l=""),window.history.pushState("string","JB Jobs List",window.location.origin+window.location.pathname+l)},get:function(e,o){var s={},t=wp.JB.jobs_list.url.parse();if(jQuery.each(t,function(e){""!==t[e]&&(s[e]=t[e])}),o){if(void 0!==s[o])try{s[o]=decodeURIComponent(s[o])}catch(e){console.error(e)}return s[o]}return s},parse:function(){var s={},e=window.location.search.substring(1);if(""!==e){var t=e.split("&");jQuery.each(t,function(e){var o=t[e].split("=");s[o[0]]=o[1]})}return s},get_page:function(e){var o=e.data("page");return o&&void 0!==o||(o=1),o},get_per_page:function(e){var o=e.data("per-page");return o&&void 0!==o||(o=null),o},get_employer:function(e){var o=e.data("employer");return o&&void 0!==o||(o=""),o},get_logo:function(e){var o=e.data("no-logo");return void 0===o&&(o=null),o},get_hide_job_types:function(e){var o=e.data("hide-job-types");return void 0===o&&(o=null),o},get_search:function(e){return e.find(".jb-search-line").length?e.find(".jb-search-line").val():""},get_location:function(e){return e.find(".jb-search-location").length?e.find(".jb-search-location").val():""},get_type:function(e){return e.find(".jb-only-remote").length?e.find(".jb-only-remote").is(":checked")?1:0:""},get_type_tag:function(e){return e.find(".jb-job-type-filter").length?e.find(".jb-job-type-filter").val():e.data("type")},get_category:function(e){return e.find(".jb-job-category-filter").length?e.find(".jb-job-category-filter").val():e.data("category")},get_hide_expired:function(e){var o=e.data("hide-expired");return void 0===o&&(o=null),o},get_hide_filled:function(e){var o=e.data("hide-filled");return void 0===o&&(o=null),o},get_filled_only:function(e){var o=e.data("filled-only");return void 0===o&&(o=null),o},get_orderby:function(e){var o=e.data("orderby");return void 0===o&&(o="date"),o},get_order:function(e){var o=e.data("order");return void 0===o&&(o="DESC"),o}},ajax:function(s,t){var e={page:wp.JB.jobs_list.url.get_page(s),per_page:wp.JB.jobs_list.url.get_per_page(s),search:wp.JB.jobs_list.url.get_search(s),location:wp.JB.jobs_list.url.get_location(s),remote_only:wp.JB.jobs_list.url.get_type(s),type:wp.JB.jobs_list.url.get_type_tag(s),category:wp.JB.jobs_list.url.get_category(s),employer:wp.JB.jobs_list.url.get_employer(s),no_logo:wp.JB.jobs_list.url.get_logo(s),hide_job_types:wp.JB.jobs_list.url.get_hide_job_types(s),hide_expired:wp.JB.jobs_list.url.get_hide_expired(s),hide_filled:wp.JB.jobs_list.url.get_hide_filled(s),filled_only:wp.JB.jobs_list.url.get_filled_only(s),orderby:wp.JB.jobs_list.url.get_orderby(s),order:wp.JB.jobs_list.url.get_order(s),nonce:jb_front_data.nonce};wp.JB.jobs_list.is_search=!!(e.search||e.location||e.remote_only),wp.JB.jobs_list.first_load&&(1<e.page&&(e.get_previous=!0),wp.JB.jobs_list.first_load=!1),e=wp.hooks.applyFilters("jb_jobs_request",e),wp.JB.jobs_list.preloader.show(s),wp.ajax.send("jb-get-jobs",{data:e,success:function(e){var o=wp.template("jb-jobs-list-line");t?s.find(".jb-jobs-wrapper").append(o(e)):s.find(".jb-jobs-wrapper").html(o(e)),s.data("total_pages",e.pagination.total_pages),0<e.pagination.total_pages?(s.find(".jb-jobs-wrapper").removeClass("jb-no-jobs"),e.pagination.total_pages==e.pagination.current_page?s.find(".jb-load-more-jobs").hide():s.find(".jb-load-more-jobs").show()):(t||(wp.JB.jobs_list.is_search?s.find(".jb-jobs-wrapper").html(s.data("no-jobs-search")):s.find(".jb-jobs-wrapper").html(s.data("no-jobs"))),s.find(".jb-jobs-wrapper").addClass("jb-no-jobs"),s.find(".jb-load-more-jobs").hide()),wp.hooks.doAction("jb_jobs_list_loaded",e),s.find(".jb-do-search").removeClass("disabled"),wp.JB.jobs_list.preloader.hide(s)},error:function(e){console.log(e),wp.JB.jobs_list.preloader.hide(s),s.find(".jb-do-search").removeClass("disabled")}})}},jQuery(document).ready(function(r){wp.JB.jobs_list.objects.wrapper.length&&wp.JB.jobs_list.objects.wrapper.each(function(){wp.JB.jobs_list.ajax(r(this))}),r(document.body).on("click",".jb-do-search",function(){if(!r(this).hasClass("disabled")){var e=r(this).parents(".jb-jobs");if(!wp.JB.jobs_list.is_busy(e)){wp.JB.jobs_list.preloader.show(e),e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-page","");var o=wp.JB.jobs_list.url.get_search(e);wp.JB.jobs_list.url.set(e,"jb-search",o);var s=wp.JB.jobs_list.url.get_location(e);wp.JB.jobs_list.url.set(e,"jb-location-search",s),wp.hooks.doAction("jb_jobs_list_do_search",e),r(this).addClass("disabled"),wp.JB.jobs_list.ajax(e)}}}),r(document.body).on("keypress",".jb-search-line, .jb-search-location",function(e){if(13===e.which){var o=r(this).parents(".jb-jobs"),s=o.find(".jb-do-search");if(s.hasClass("disabled"))return;if(wp.JB.jobs_list.is_busy(o))return;wp.JB.jobs_list.preloader.show(o),o.data("page",1),wp.JB.jobs_list.url.set(o,"jb-page","");var t=wp.JB.jobs_list.url.get_search(o);wp.JB.jobs_list.url.set(o,"jb-search",t);var a=wp.JB.jobs_list.url.get_location(o);wp.JB.jobs_list.url.set(o,"jb-location-search",a),wp.hooks.doAction("jb_jobs_list_do_search",o),s.addClass("disabled"),wp.JB.jobs_list.ajax(o)}}),r(document.body).on("click",".jb-only-remote",function(){var e=r(this).parents(".jb-jobs");if(!wp.JB.jobs_list.is_busy(e)){e.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.preloader.show(e),e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-page","");var o=wp.JB.jobs_list.url.get_type(e);o?wp.JB.jobs_list.url.set(e,"jb-is-remote",o):wp.JB.jobs_list.url.set(e,"jb-is-remote",""),wp.JB.jobs_list.ajax(e)}}),r(document.body).on("change",".jb-job-type-filter",function(){var e=r(this).parents(".jb-jobs");wp.JB.jobs_list.is_busy(e)||(e.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.preloader.show(e),e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-page",""),wp.JB.jobs_list.url.set(e,"jb-job-type",r(this).val()),wp.JB.jobs_list.ajax(e))}),r(document.body).on("change",".jb-job-category-filter",function(){var e=r(this).parents(".jb-jobs");wp.JB.jobs_list.is_busy(e)||(e.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.preloader.show(e),e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-page",""),wp.JB.jobs_list.url.set(e,"jb-job-category",r(this).val()),wp.JB.jobs_list.ajax(e))}),r(document.body).on("click",".jb-load-more-jobs",function(){var e=r(this).parents(".jb-jobs");if(!r(this).hasClass("disabled")&&!wp.JB.jobs_list.is_busy(e)){wp.JB.jobs_list.preloader.show(e);var o=1*e.data("page")+1;e.data("page",o),wp.JB.jobs_list.url.set(e,"jb-page",o),wp.JB.jobs_list.ajax(e,!0)}}),window.addEventListener("popstate",function(e){wp.JB.jobs_list.objects.wrapper.length&&wp.JB.jobs_list.objects.wrapper.each(function(){wp.JB.jobs_list.ajax(r(this))})})});