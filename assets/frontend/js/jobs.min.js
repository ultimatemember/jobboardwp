"object"!=typeof wp.JB&&(wp.JB={}),"object"!=typeof wp.JB.jobs_list&&(wp.JB.jobs_list={}),wp.JB.jobs_list={wrapper_selector:".jb-jobs",first_load:!0,is_search:!1,objects:{wrapper:jQuery(".jb-jobs")},get_wrapper_index:function(e){return e.data("wrapper-index")},is_busy:function(e){return e.hasClass("jb-busy")},preloader:{show:function(e){e.addClass("jb-busy").find(".jb-overlay").show()},hide:function(e){e.removeClass("jb-busy").find(".jb-overlay").hide()}},url:{set:function(e,s,t){var o=wp.JB.jobs_list.url.get(),a=wp.JB.jobs_list.get_wrapper_index(e),i={},l=(jQuery.isArray(t)?(jQuery.each(t,function(e){t[e]=encodeURIComponent(t[e])}),t=t.join("||")):jQuery.isNumeric(t)||(t=t.split("||"),jQuery.each(t,function(e){t[e]=encodeURIComponent(t[e])}),t=t.join("||")),""!==t&&(i[s+"["+a+"]"]=t),jQuery.each(o,function(e){s+"["+a+"]"===e?""!==t&&(i[e]=t):i[e]=o[e]}),[]),e=(jQuery.each(i,function(e){l.push(e+"="+i[e])}),"?"+(l=wp.hooks.applyFilters("jb_job_dashboard_url_attrs",l)).join("&"));"?"===e&&(e=""),window.history.pushState("string","JB Jobs List",window.location.origin+window.location.pathname+e)},get:function(e,s){var t={},o=wp.JB.jobs_list.url.parse();if(jQuery.each(o,function(e){""!==o[e]&&(t[e]=o[e])}),s){if(void 0!==t[s])try{t[s]=decodeURIComponent(t[s])}catch(e){console.error(e)}return t[s]}return t},parse:function(){var s,t={},e=window.location.search.substring(1);return""!==e&&(s=e.split("&"),jQuery.each(s,function(e){e=s[e].split("=");t[e[0]]=e[1]})),t},get_page:function(e){e=e.data("page");return e=e&&void 0!==e?e:1},get_per_page:function(e){e=e.data("per-page");return e=e&&void 0!==e?e:null},get_employer:function(e){e=e.data("employer");return e=e&&void 0!==e?e:""},get_logo:function(e){e=e.data("no-logo");return e=void 0===e?null:e},get_hide_job_types:function(e){e=e.data("hide-job-types");return e=void 0===e?null:e},get_search:function(e){return e.find(".jb-search-line").length?e.find(".jb-search-line").val():""},get_location:function(e){return e.find(".jb-search-location").length?e.find(".jb-search-location").val():""},get_type:function(e){return e.find(".jb-only-remote").length?e.find(".jb-only-remote").is(":checked")?1:0:""},get_type_tag:function(e){return e.find(".jb-job-type-filter").length?e.find(".jb-job-type-filter").val():e.data("type")},get_category:function(e){return e.find(".jb-job-category-filter").length?e.find(".jb-job-category-filter").val():e.data("category")},get_hide_expired:function(e){e=e.data("hide-expired");return e=void 0===e?null:e},get_hide_filled:function(e){e=e.data("hide-filled");return e=void 0===e?null:e},get_filled_only:function(e){e=e.data("filled-only");return e=void 0===e?null:e},get_orderby:function(e){e=e.data("orderby");return e=void 0===e?"date":e},get_order:function(e){e=e.data("order");return e=void 0===e?"DESC":e},get_salary:function(e){let s;return s=e.find(".jb-double-range").length&&e.find(".jb-only-salary").is(":checked")?e.find(".jb-double-range").data("min")+"-"+e.find(".jb-double-range").data("max"):e.data("salary")}},ajax:function(t,o){var e={page:wp.JB.jobs_list.url.get_page(t),per_page:wp.JB.jobs_list.url.get_per_page(t),search:wp.JB.jobs_list.url.get_search(t),location:wp.JB.jobs_list.url.get_location(t),remote_only:wp.JB.jobs_list.url.get_type(t),type:wp.JB.jobs_list.url.get_type_tag(t),category:wp.JB.jobs_list.url.get_category(t),employer:wp.JB.jobs_list.url.get_employer(t),no_logo:wp.JB.jobs_list.url.get_logo(t),hide_job_types:wp.JB.jobs_list.url.get_hide_job_types(t),hide_expired:wp.JB.jobs_list.url.get_hide_expired(t),hide_filled:wp.JB.jobs_list.url.get_hide_filled(t),filled_only:wp.JB.jobs_list.url.get_filled_only(t),orderby:wp.JB.jobs_list.url.get_orderby(t),order:wp.JB.jobs_list.url.get_order(t),salary:wp.JB.jobs_list.url.get_salary(t),nonce:jb_front_data.nonce};wp.JB.jobs_list.is_search=!!(e.search||e.location||e.remote_only),wp.JB.jobs_list.first_load&&(1<e.page&&(e.get_previous=!0),wp.JB.jobs_list.first_load=!1),e=wp.hooks.applyFilters("jb_jobs_request",e,t),wp.JB.jobs_list.preloader.show(t),wp.ajax.send("jb-get-jobs",{data:e,success:function(e){var s=wp.template("jb-jobs-list-line");o?t.find(".jb-jobs-wrapper").append(s(e)):t.find(".jb-jobs-wrapper").html(s(e)),t.data("total_pages",e.pagination.total_pages),0<e.pagination.total_pages?(t.find(".jb-jobs-wrapper").removeClass("jb-no-jobs"),e.pagination.total_pages==e.pagination.current_page?t.find(".jb-load-more-jobs").hide():t.find(".jb-load-more-jobs").show()):(o||(wp.JB.jobs_list.is_search?t.find(".jb-jobs-wrapper").html(t.data("no-jobs-search")):t.find(".jb-jobs-wrapper").html(t.data("no-jobs"))),t.find(".jb-jobs-wrapper").addClass("jb-no-jobs"),t.find(".jb-load-more-jobs").hide()),wp.hooks.doAction("jb_jobs_list_loaded",e),t.find(".jb-do-search").removeClass("disabled"),wp.JB.jobs_list.preloader.hide(t)},error:function(e){console.log(e),wp.JB.jobs_list.preloader.hide(t),t.find(".jb-do-search").removeClass("disabled")}})},filters:{slider:{getValues:function(){var e=jQuery(this).parent(),s=e.data("symbol"),t=e.find("input"),o=parseFloat(t[0].value),t=parseFloat(t[1].value),a=(t<o&&(a=t,t=o,o=a),jQuery(this).parents(".jb-salary-filter").find(".jb-double-range-values"));let i=e.data("format");console.log(a),console.log(i),console.log(o),console.log(t),i=(i=i.replace(/\$\{salary\}/gi,o+" - "+t)).replace(/\$\{symbol\}/gi,s),a.html(i),e.data("min",o),e.data("max",t)}}}},jQuery(document).ready(function(a){wp.JB.jobs_list.objects.wrapper.length&&wp.JB.jobs_list.objects.wrapper.each(function(){var e=a(this),s=e.find(".jb-double-range");0<s.length&&s.find('input[type="range"]').each(function(){a(this)[0].oninput=wp.JB.jobs_list.filters.slider.getValues}),wp.JB.jobs_list.ajax(e)}),a(document.body).on("click",".jb-do-search",function(){var e,s;a(this).hasClass("disabled")||(e=a(this).parents(".jb-jobs"),wp.JB.jobs_list.is_busy(e))||(wp.JB.jobs_list.preloader.show(e),e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-page",""),s=wp.JB.jobs_list.url.get_search(e),wp.JB.jobs_list.url.set(e,"jb-search",s),s=wp.JB.jobs_list.url.get_location(e),wp.JB.jobs_list.url.set(e,"jb-location-search",s),wp.hooks.doAction("jb_jobs_list_do_search",e),a(this).addClass("disabled"),wp.JB.jobs_list.ajax(e))}),a(document.body).on("keypress",".jb-search-line, .jb-search-location",function(e){var s,t;13!==e.which||(s=(e=a(this).parents(".jb-jobs")).find(".jb-do-search")).hasClass("disabled")||wp.JB.jobs_list.is_busy(e)||(wp.JB.jobs_list.preloader.show(e),e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-page",""),t=wp.JB.jobs_list.url.get_search(e),wp.JB.jobs_list.url.set(e,"jb-search",t),t=wp.JB.jobs_list.url.get_location(e),wp.JB.jobs_list.url.set(e,"jb-location-search",t),wp.hooks.doAction("jb_jobs_list_do_search",e),s.addClass("disabled"),wp.JB.jobs_list.ajax(e))}),a(document.body).on("click",".jb-only-remote",function(){var e,s=a(this).parents(".jb-jobs");wp.JB.jobs_list.is_busy(s)||(s.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.preloader.show(s),s.data("page",1),wp.JB.jobs_list.url.set(s,"jb-page",""),(e=wp.JB.jobs_list.url.get_type(s))?wp.JB.jobs_list.url.set(s,"jb-is-remote",e):wp.JB.jobs_list.url.set(s,"jb-is-remote",""),wp.JB.jobs_list.ajax(s))}),a(document.body).on("click",".jb-only-salary",function(){var e=a(this).parents(".jb-jobs");if(!wp.JB.jobs_list.is_busy(e)){if(a(this).is(":checked")){e.find(".jb-salary-filter").show();var s=e.find(".jb-double-range").data("min"),t=e.find(".jb-double-range").data("max");wp.JB.jobs_list.url.set(e,"jb-salary",s+"-"+t)}else{e.find(".jb-salary-filter").hide();let t=e.find(".jb-double-range > input:first").attr("min"),o=e.find(".jb-double-range > input:first").attr("max");e.find(".jb-double-range").data("min",t).data("max",o),e.find(".jb-double-range input")[0].value=t,e.find(".jb-double-range input")[1].value=o,e.find(".jb-double-range input").each(function(e){let s=o;0===e&&(s=t),a(this).val(s).trigger("change")}),wp.JB.jobs_list.url.set(e,"jb-salary","")}e.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.preloader.show(e),e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-page",""),wp.JB.jobs_list.ajax(e)}}),a(document.body).on("change",".jb-job-type-filter",function(){var e=a(this).parents(".jb-jobs");wp.JB.jobs_list.is_busy(e)||(e.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.preloader.show(e),e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-page",""),wp.JB.jobs_list.url.set(e,"jb-job-type",a(this).val()),wp.JB.jobs_list.ajax(e))}),a(document.body).on("change",".jb-job-category-filter",function(){var e=a(this).parents(".jb-jobs");wp.JB.jobs_list.is_busy(e)||(e.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.preloader.show(e),e.data("page",1),wp.JB.jobs_list.url.set(e,"jb-page",""),wp.JB.jobs_list.url.set(e,"jb-job-category",a(this).val()),wp.JB.jobs_list.ajax(e))}),a(document.body).on("click",".jb-load-more-jobs",function(){var e,s=a(this).parents(".jb-jobs");a(this).hasClass("disabled")||wp.JB.jobs_list.is_busy(s)||(wp.JB.jobs_list.preloader.show(s),e=+s.data("page")+1,s.data("page",e),wp.JB.jobs_list.url.set(s,"jb-page",e),wp.JB.jobs_list.ajax(s,!0))}),a(document.body).on("change",".jb-double-range input",function(){var e,s,t=a(this).parents(".jb-jobs");wp.JB.jobs_list.is_busy(t)||(t.find(".jb-do-search").addClass("disabled"),wp.JB.jobs_list.preloader.show(t),(s=t.find(".jb-double-range")).find('input[type="range"]').each(function(){a(this)[0].oninput()}),e=s.data("min"),s=s.data("max"),t.data("page",1),wp.JB.jobs_list.url.set(t,"jb-salary",e+"-"+s),wp.JB.jobs_list.ajax(t))}),window.addEventListener("popstate",function(e){wp.JB.jobs_list.objects.wrapper.length&&wp.JB.jobs_list.objects.wrapper.each(function(){wp.JB.jobs_list.ajax(a(this))})})});