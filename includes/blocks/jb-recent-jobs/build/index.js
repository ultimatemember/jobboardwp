(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var l in o)e.o(o,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:o[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,o=window.wp.data,l=window.wp.components,n=window.wp.blockEditor,r=window.wp.serverSideRender;var a=e.n(r);(0,window.wp.blocks.registerBlockType)("jb-block/jb-recent-jobs",{edit:function(e){const r=(0,n.useBlockProps)(),b=(0,o.useSelect)((e=>e("core").getEntityRecords("taxonomy","jb-job-type",{per_page:-1,_fields:["id","name"]}))),i=(0,o.useSelect)((e=>e("core").getEntityRecords("taxonomy","jb-job-category",{per_page:-1,_fields:["id","name"]})));let s=e.attributes.number,c=e.attributes.no_logo,d=e.attributes.no_job_types,p=e.attributes.hide_filled,_=e.attributes.orderby,u=[{label:wp.i18n.__("Posting date","jobboardwp"),value:"date"},{label:wp.i18n.__("Expiry date","jobboardwp"),value:"expiry_date"}],y=e.attributes.type,m=[],g=e.attributes.category,w=[],j=e.attributes.remote_only,h="-hide",f="-hide";function v(e,t){let o=[];return"type"===t?e.map((function(e){o.push({label:e.name,value:e.id})})):"category"===t&&e.map((function(e){o.push({label:e.name,value:e.id})})),o}function E(e,t,o,l,n,r,a,b){let i="[jb_recent_jobs";return void 0!==e&&""!==e?i=i+' number="'+e+'"':i+=' number="5"',i+=!0===a?' no_logo="1"':' no_logo="0"',i+=!0===r?' hide_filled="1"':' hide_filled="0"',i+=!0===b?' no_job_types="1"':' no_job_types="0"',void 0!==o&&""!==o&&(i=i+' type="'+o+'"'),void 0!==t&&""!==t&&(i=i+' category="'+t+'"'),void 0!==n&&(i=i+' orderby="'+n+'"'),i+=!0===l?' remote_only="1"':' remote_only="0"',i+="]",i}if(""===g&&(g=[]),""===y&&(y=[]),null!==b&&(m=m.concat(b),0!==b.length&&""),null!==i&&(w=w.concat(i),0!==i.length&&""),!m||!w)return(0,t.createElement)("p",null,(0,t.createElement)(l.Spinner,null),wp.i18n.__("Loading...","jobboardwp"));if(0===m.length||0===w.length)return"No data.";let C=v(w,"category"),x=v(m,"type");return(0,t.createElement)("div",r,(0,t.createElement)(a(),{block:"jb-block/jb-recent-jobs",attributes:e.attributes}),(0,t.createElement)(n.InspectorControls,null,(0,t.createElement)(l.PanelBody,{title:wp.i18n.__("Recent jobs","jobboardwp")},(0,t.createElement)(l.TextControl,{label:wp.i18n.__("Number","jobboardwp"),className:"jb_number",type:"number",min:1,value:e.attributes.number,onChange:t=>{""===t&&(t=1),e.setAttributes({number:t}),E(t,g,y,j,_,p,c,d)}}),(0,t.createElement)(l.ToggleControl,{label:wp.i18n.__("Hide logo","jobboardwp"),className:"jb_no_logo",checked:e.attributes.no_logo,onChange:t=>{e.setAttributes({no_logo:t}),E(s,g,y,j,_,p,t,d)}}),(0,t.createElement)(l.ToggleControl,{label:wp.i18n.__("Hide filled","jobboardwp"),className:"jb_hide_filled",checked:e.attributes.hide_filled,onChange:t=>{e.setAttributes({hide_filled:t}),E(s,g,y,j,_,t,c,d)}}),(0,t.createElement)(l.ToggleControl,{label:wp.i18n.__("Hide job types","jobboardwp"),className:"jb_no_job_types",checked:e.attributes.no_job_types,onChange:t=>{e.setAttributes({no_job_types:t}),E(s,g,y,j,_,p,c,t)}}),(0,t.createElement)(l.SelectControl,{label:wp.i18n.__("Select category","jobboardwp"),className:"{'jb_select_category' + category_hide}",value:g,options:C,multiple:!0,suffix:" ",style:{height:"80px",overflow:"auto"},onChange:t=>{e.setAttributes({category:t}),E(s,t,y,j,_,p,c,d)}}),(0,t.createElement)(l.SelectControl,{label:wp.i18n.__("Select type","jobboardwp"),className:"{'jb_select_type' + type_hide}",value:y,options:x,multiple:!0,suffix:" ",style:{height:"80px",overflow:"auto"},onChange:t=>{e.setAttributes({type:t}),E(s,g,t,j,_,p,c,d)}}),(0,t.createElement)(l.SelectControl,{label:wp.i18n.__("Select order by","jobboardwp"),className:"jb_select_orderby",value:e.attributes.orderby,options:u,style:{height:"35px",lineHeight:"20px",padding:"0 7px"},onChange:t=>{e.setAttributes({orderby:t}),E(s,g,y,j,t,p,c,d)}}),(0,t.createElement)(l.ToggleControl,{label:wp.i18n.__("Remote only","jobboardwp"),className:"jb_remote_only",checked:e.attributes.remote_only,onChange:t=>{e.setAttributes({remote_only:t}),E(s,g,y,t,_,p,c,d)}}))))},save:function(e){return null}})})();